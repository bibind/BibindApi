<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
	<title></title>
	<meta name="generator" content="LibreOffice 7.3.7.2 (Linux)"/>
	<meta name="created" content="2025-01-10T15:46:21.418531564"/>
	<meta name="changed" content="2025-01-14T11:43:13.226503181"/>
	<style type="text/css">
		@page { size: 21cm 29.7cm; margin: 2cm }
		p { line-height: 115%; margin-bottom: 0.25cm; background: transparent }
		h3 { margin-top: 0.25cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h3.western { font-family: "Liberation Serif", serif; font-size: 14pt; font-weight: bold }
		h3.cjk { font-family: "Noto Serif CJK SC"; font-size: 14pt; font-weight: bold }
		h3.ctl { font-family: "Lohit Devanagari"; font-size: 14pt; font-weight: bold }
		h4 { margin-top: 0.21cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h4.western { font-family: "Liberation Serif", serif; font-size: 12pt; font-weight: bold }
		h4.cjk { font-family: "Noto Serif CJK SC"; font-size: 12pt; font-weight: bold }
		h4.ctl { font-family: "Lohit Devanagari"; font-size: 12pt; font-weight: bold }
		h2 { margin-top: 0.35cm; margin-bottom: 0.21cm; background: transparent; page-break-after: avoid }
		h2.western { font-family: "Liberation Serif", serif; font-size: 18pt; font-weight: bold }
		h2.cjk { font-family: "Noto Serif CJK SC"; font-size: 18pt; font-weight: bold }
		h2.ctl { font-family: "Lohit Devanagari"; font-size: 18pt; font-weight: bold }
		h5 { margin-top: 0.21cm; margin-bottom: 0.11cm; background: transparent; page-break-after: avoid }
		h5.western { font-family: "Liberation Serif", serif; font-size: 10pt; font-weight: bold }
		h5.cjk { font-family: "Noto Serif CJK SC"; font-size: 10pt; font-weight: bold }
		h5.ctl { font-family: "Lohit Devanagari"; font-size: 10pt; font-weight: bold }
		td p { orphans: 0; widows: 0; background: transparent }
		th p { font-weight: bold; text-align: center; orphans: 0; widows: 0; background: transparent }
		h6 { margin-top: 0.11cm; margin-bottom: 0.11cm; background: transparent; page-break-after: avoid }
		h6.western { font-family: "Liberation Serif", serif; font-size: 7pt; font-weight: bold }
		h6.cjk { font-family: "Noto Serif CJK SC"; font-size: 7pt; font-weight: bold }
		h6.ctl { font-family: "Lohit Devanagari"; font-size: 7pt; font-weight: bold }
		strong { font-weight: bold }
		code.western { font-family: "Liberation Mono", monospace }
		code.cjk { font-family: "Noto Sans Mono CJK SC", monospace }
		code.ctl { font-family: "Liberation Mono", monospace }
		em { font-style: italic }
		a:link { color: #000080; text-decoration: underline }
		a:visited { color: #800000; text-decoration: underline }
	</style>
</head>
<body lang="fr-FR" link="#000080" vlink="#800000" dir="ltr"><h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm">
<strong><font size="5" style="font-size: 20pt">Plan de formation
Magento - Scénario pratique : création d'un site de produits via
une API (Amazon)</font></strong></h3>
<p><strong>Scénario</strong> :<br/>
Vous êtes une agence en charge
de développer un site e-commerce multimarques qui regroupe et
héberge des <strong>produits récupérés via l’API Amazon</strong>
(Amazon Product Advertising API). Les produits récupérés seront
affichés avec leurs détails, et les utilisateurs pourront les
ajouter à leur panier pour les acheter directement via votre
plateforme.</p>
<hr/>

<h3 class="western"><strong>Objectifs pédagogiques :</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm">Comprendre et maîtriser les bases
	de Magento (modules, thèmes, etc.). 
	</p>
	<li><p style="margin-bottom: 0cm">Développer des modules
	personnalisés pour importer et gérer les produits d’une API
	externe. 
	</p>
	<li><p style="margin-bottom: 0cm">Intégrer ces produits au
	catalogue Magento. 
	</p>
	<li><p style="margin-bottom: 0cm">Personnaliser le frontend pour
	afficher des produits récupérés par l'API. 
	</p>
	<li><p style="margin-bottom: 0cm">Gérer les paniers et les
	commandes. 
	</p>
	<li><p>Optimiser le site (performance, cache, sécurité, API). 
	</p>
</ol>
<p><br/>
<br/>

</p>
<p><font size="4" style="font-size: 14pt"><b>Publique concerné</b></font></p>
<ol>
	<li><p style="font-variant: normal; letter-spacing: normal; font-style: normal; font-weight: normal">
	<font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt">Développeur
	junior et confirmé qui désirent maîtriser les différentes
	fonctionnalités de Magento avec l'utilisation du framework
	zendframwork</font></font></font></p>
</ol>
<p><br/>
<br/>

</p>
<p><br/>
<br/>

</p>
<p><font size="4" style="font-size: 14pt"><b>Pré-requis</b></font></p>
<ol>
	<li><p><font face="Liberation Serif, serif"><span style="font-variant: normal"><font color="#212529"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Connaître
	le POO en PHP</span></span></span></font></font></span></font></p>
	<li><p><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Connaître
	</span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Magento
	</span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">en
	tant que développeur (routing,&nbsp;</span></span></span></font></font></font></span><em><strong><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><b>Form
	API</b></span></span></font></font></font></span></strong></em><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">,&nbsp;</span></span></span></font></font></font></span><strong><em><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><b>Database
	API</b></span></span></font></font></font></span></em></strong><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">...).
	Les bases du développement de module pour </span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Magento
	</span></span></span></font></font></font></span><span style="font-variant: normal"><font color="#212529"><font face="Liberation Serif, serif"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">sont
	indispensables.</span></span></span></font></font></font></span></p>
	<li><p><font face="Liberation Serif, serif"><span style="font-variant: normal"><font color="#212529"><font size="3" style="font-size: 12pt"><span style="letter-spacing: normal"><span style="font-style: normal"><span style="font-weight: normal">Connaître
	HTML et CSS (fortement recommandé)</span></span></span></font></font></span></font></p>
</ol>
<p><br/>
<br/>

</p>
<hr/>

<h2 class="western"><br/>
<br/>

</h2>
<h2 class="western"><br/>
<br/>

</h2>
<h2 class="western" style="page-break-before: always"><a name="__DdeLink__16437_2092794412"></a><a name="__DdeLink__16396_2092794412"></a>
<strong>I - </strong><strong>Jour 1 : Introduction et mise en place
du projet</strong></h2>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm">La première journée de cette
formation a pour objectif de poser les bases essentielles pour le
développement avec Magento. Nous débuterons par une exploration des
concepts fondamentaux de Magento, son architecture robuste et
modulaire, ainsi que son écosystème riche. Ces notions théoriques
permettront aux participants de mieux comprendre la philosophie de
cette plateforme, et de se familiariser avec la manière dont elle
structure et manipule ses fonctionnalités.</p>
<p style="margin-bottom: 0.37cm">Ensuite, nous nous concentrerons sur
l'installation et la configuration de l'environnement de
développement. Cela inclut l'utilisation d'outils pratiques comme
Docker ou DDEV pour simplifier et automatiser la préparation de
notre infrastructure. Nous installerons une instance Magento
fonctionnelle, prête à être personnalisée tout au long de cette
formation.</p>
<p style="margin-bottom: 0.37cm">Enfin, la journée s'achèvera par
une introduction à l’<strong>API Amazon Product Advertising</strong>,
que nous utiliserons tout au long de la formation pour alimenter
notre site en produits externes. Nous explorerons rapidement son
fonctionnement, son authentification et ses principales
fonctionnalités pour établir les bases de son intégration future
avec Magento.</p>
<p style="margin-bottom: 0.37cm">À la fin de cette première
journée, les développeurs auront installé et configuré un
environnement fonctionnel, construit une base solide pour démarrer
le développement de notre projet, et seront prêts à s’attaquer
aux modules personnalisés dès le jour 2.</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm; page-break-before: always"><a name="__DdeLink__16441_2092794412"></a>
<strong><font size="5" style="font-size: 18pt">1.1 Présentation et
préparation de Magento</font></strong></p>
<h4 class="western"><strong>Objectifs de cette section :</strong></h4>
<ul>
	<ul>
		<li><p style="margin-bottom: 0cm">Comprendre les concepts
		fondamentaux et l’architecture de Magento. 
		</p>
		<li><p style="margin-bottom: 0cm">Apprendre la structure modulaire
		de Magento et ses fichiers clefs. 
		</p>
		<li><p>Installer Magento grâce à <strong>Composer</strong>, puis
		mettre en place un environnement local optimisé avec des
		technologies modernes comme <strong>Docker</strong> ou <strong>DDEV</strong>.
				</p>
	</ul>
</ul>
<hr/>

<h4 class="western"><strong><font size="4" style="font-size: 16pt">A
</font></strong><strong><font size="4" style="font-size: 16pt">-
Découvrir Magento et son écosystème</font></strong></h4>
<p style="margin-bottom: 0.37cm">Magento est l'une des plateformes
e-commerce les plus utilisées, en raison de sa flexibilité et de sa
robustesse. Lorsqu’on aborde Magento, il est essentiel de
comprendre que cette solution repose sur une <strong>architecture
très modulaire</strong> basée sur les principes suivants :</p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>Répartition en modules
	découplés</strong> pour une meilleure extensibilité. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Respect du pattern MVC</strong>
	(Model-View-Controller), combiné avec une architecture orientée
	service. 
	</p>
	<li><p>Une structure qui adopte le plus possible des <strong>standards
	modernes de PHP</strong> (PSR-1/PSR-2, DI, Composer, etc.). 
	</p>
</ul>
<p style="margin-bottom: 0.37cm">Voici quelques concepts essentiels
pour poser les bases avant l'installation et la manipulation de
Magento :</p>
<h5 class="western"><strong><font size="4" style="font-size: 14pt">A.</font></strong><strong><font size="4" style="font-size: 14pt">1.
La structure de Magento</font></strong><font size="4" style="font-size: 14pt">
:</font></h5>
<p><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm">Magento utilise une structure de
dossiers bien définie, où chaque composant a un rôle précis.</p>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Organisation des
	fichiers principaux :</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm"><code class="western">app/</code>
		: Cœur de votre projet Magento. 
		</p>
		<ul>
			<li><p style="margin-bottom: 0cm"><code class="western">code/</code>
			: Contient les modules Magento personnalisés. 
			</p>
			<li><p style="margin-bottom: 0cm"><code class="western">design/</code>
			: Contient les thèmes pour le Frontend et Backend. 
			</p>
			<li><p style="margin-bottom: 0cm"><code class="western">etc/</code>
			: Configuration des modules. 
			</p>
		</ul>
		<li><p style="margin-bottom: 0cm"><code class="western">pub/</code>
		: Dossier public (accessible via le navigateur). Fichiers frontaux.
				</p>
		<li><p style="margin-bottom: 0cm"><code class="western">vendor/</code>
		: Système de packages géré avec Composer (Magento Core, outils
		tiers). 
		</p>
		<li><p style="margin-bottom: 0cm"><code class="western">generated/</code>
		: Code généré automatiquement (proxies, fichiers de cache PHP). 
		</p>
	</ul>
</ol>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<ol start="2">
	<li><p style="margin-bottom: 0.37cm"><strong>Les modules :</strong>
	Magento fonctionne grâce à une <strong>architecture modulaire</strong>,
	où chaque fonction (gestion de catalogues, clients, commandes) est
	encapsulée dans un module :</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Les modules déclarent leurs
		fonctionnalités et leurs relations via un fichier <code class="western">module.xml</code>.
				</p>
		<li><p style="margin-bottom: 0cm">Les <strong>fichiers XML</strong>
		jouent un rôle clé dans la configuration : 
		</p>
		<ul>
			<li><p style="margin-bottom: 0cm"><code class="western">layout.xml</code>
			: Gère les positions des blocs dans le thème. 
			</p>
			<li><p style="margin-bottom: 0cm"><code class="western">routes.xml</code>
			: Définit les chemins des URLs. 
			</p>
			<li><p style="margin-bottom: 0cm"><code class="western">di.xml</code>
			: Définit l'<em>injection de dépendances</em> (dependency
			injection). 
			</p>
			<li><p style="margin-bottom: 0cm"><code class="western">db_schema.xml</code>
			: Déclare les tables (API déclarative pour les bases de
			données). 
			</p>
			<p style="margin-bottom: 0cm"></p>
		</ul>
	</ul>
	<li><p><strong>Service Contracts (API) :</strong> <br/>
<br/>
<br/>

	</p>
</ol>
<p style="margin-bottom: 0.37cm">	3.1 Les Service Contracts dans
Magento 2 forment une <strong>API interne</strong> qui permet aux
différents composants de communiquer entre eux de manière
standardisée, stable et décorrélée.<br/>
Il s’agit d’une
<strong>approche contractuelle</strong>, où les développeurs
décrivent les fonctionnalités disponibles via des <strong>interfaces
(contrats)</strong>, implémentées directement par les modules ou
services de Magento.</p>
<p style="margin-bottom: 0.37cm">Cette notion repose principalement
sur trois concepts fondamentaux :</p>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Les Interfaces PHP</strong>
	: Définissent les &quot;contrats&quot; ou comportements prévus
	d’un module/service. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Les Data-Objects</strong>
	: Objets simples pour échanger des données entre les couches (ex :
	<code class="western">ProductInterface</code> pour représenter un
	produit). 
	</p>
	<li><p><strong>La transparence</strong> : Une séparation totale
	entre l’interface (contrat) et l'implémentation réelle. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong><font size="4" style="font-size: 14pt">A.</font></strong><strong><font size="4" style="font-size: 14pt">2.
Fonctionnalités natives de Magento :</font></strong></h5>
<p style="margin-bottom: 0.37cm">Magento est particulièrement
puissant grâce à certaines fonctionnalités clés disponibles
nativement :</p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>Multiboutique</strong>
	pour gérer plusieurs instances (différentes langues, devises...). 
	</p>
	<li><p style="margin-bottom: 0cm">Stockage des données via <strong>EAV
	(Entity-Attribute-Value)</strong> pour une grande flexibilité
	(exemple : ajout d'attributs personnalisés pour les produits ou
	clients). 
	</p>
	<li><p style="margin-bottom: 0cm">Gestion avancée des commandes et
	paiements. 
	</p>
	<li><p style="margin-bottom: 0cm">Système de cache intégré (Full
	Page Cache, Redis). 
	</p>
	<li><p>APIs REST et GraphQL pour exploiter Magento en tant que
	backend (<em>headless</em>). 
	</p>
</ul>
<hr/>

<h4 class="western"><strong><font size="4" style="font-size: 16pt">B
- Installation de Magento via Composer</font></strong></h4>
<p>Magento repose sur l'utilisation de <strong>Composer</strong>, qui
simplifie la gestion des dépendances et des librairies tierces.
Cette méthode est à privilégier, car elle permet d'automatiser les
mises à jour et de maintenir une bonne organisation du projet.</p>
<h5 class="western"><strong><font size="4" style="font-size: 14pt">B.1.
</font></strong><strong><font size="4" style="font-size: 14pt">Étapes
de l’installation</font></strong><font size="4" style="font-size: 14pt">
:</font></h5>
<p><br/>
<br/>

</p>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Accéder aux clés API de
	Magento Marketplace :</strong> 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Les développeurs devront créer
		un compte gratuit sur Magento Marketplace. 
		</p>
		<li><p style="margin-bottom: 0cm">Aller dans &quot;My Profile&quot;
		-&gt; &quot;Access Keys&quot;, puis générer une clé <em>public</em>
		et une clé <em>private</em>. 
		</p>
		<li><p>Ajouter ces clés globalement pour Composer : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">composer
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">config
--global http-basic.repo.magento.com </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public-key</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;
&lt;</span></span></font></font></font><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private-key&gt;</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>	2. </strong><strong>Installer
Magento : </strong>
</p>
<ol start="2">
	<ul>
		<li><p>Créez un nouveau projet : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">composer
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create-project
--repository-url=https://repo.magento.com/
magento/project-community-edition magento2</span></span></font></font></font></p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Effectuez les configurations
nécessaires lors de l'installation (base de données MySQL, URL de
base, etc.). </strong>
</p>
<p style="margin-bottom: 0cm"><strong>Installation complète : </strong>
</p>
<ol start="3">
	<ul>
		<li><p>Finalisez la configuration grâce à la CLI Magento : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
setup:install \</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--base-url=http://magento.test/
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--db-host=127.0.0.1
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--db-name=magento
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--db-user=root
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--db-password=yourpassword
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--admin-firstname=Admin
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--admin-lastname=User
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--admin-email=admin@example.com
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--admin-user=admin
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--admin-password=admin123
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--language=en_US
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--currency=USD
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--timezone=America/New_York
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--use-rewrites=</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">1</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Accéder au backend pour
vérifier le bon fonctionnement : </strong><strong><code class="western">[base_url]/admin</code></strong><strong>.
</strong>
</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><br/>

</h4>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong><font size="4" style="font-size: 16pt">C
- Mise en place de l’environnement local avec Docker ou DDEV</font></strong></h4>
<p style="margin-bottom: 0cm"><br/>

</p>
<p>Pour un environnement local simple, stable et reproductible,
<strong>Docker</strong> (ou <strong>DDEV</strong>) est essentiel.
L’intérêt principal est de pouvoir travailler de manière
standardisée, quelle que soit la machine de développement. Voici un
guide rapide :</p>
<h5 class="western"><strong><font size="4" style="font-size: 14pt">C.1.
</font></strong><strong><font size="4" style="font-size: 14pt">Mise
en place avec Docker Compose :</font></strong></h5>
<p><br/>
<br/>

</p>
<ol>
	<li><p><strong>Créez un fichier </strong><strong><code class="western">docker-compose.yml</code></strong><strong>
	:</strong> Exemple minimal pour héberger Magento : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">version</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;3.7&quot;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">services</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
 </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">web</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">image</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
nginx:latest</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">volumes</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - ./magento2:/var/www/html</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - ./nginx.conf:/etc/nginx/nginx.conf</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ports</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;80:80&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">depends_on</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - php</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
 </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">image</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
php:8.1-fpm</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">volumes</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - ./magento2:/var/www/html</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">depends_on</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - db</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">environment</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - COMPOSER_ALLOW_SUPERUSER=1</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - PHP_MEMORY_LIMIT=2G</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
 </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">db</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">image</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
mysql:8.0</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">volumes</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     - db_data:/var/lib/mysql</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">environment</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MYSQL_ROOT_PASSWORD</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
root</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MYSQL_DATABASE</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
magento</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MYSQL_USER</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
magento</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
     </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MYSQL_PASSWORD</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
magento</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">volumes</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
 </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">db_data</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Configurer Magento dans Docker
: </strong>
</p>
<ol start="2">
	<ul>
		<li><p style="margin-bottom: 0cm">Copiez le code Magento dans un
		dossier local (<code class="western">./magento2</code> dans cet
		exemple). 
		</p>
		<li><p>Lancez les services : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">docker-compose
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">up
-d</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><br/>

</h5>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong><font size="4" style="font-size: 14pt">C.2.
</font></strong><strong><font size="4" style="font-size: 14pt">Mise
en place avec DDEV :</font></strong></h5>
<p>DDEV est plus simple d’utilisation pour Magento. Après
installation de DDEV, procédez ainsi :</p>
<ol>
	<li><p>Initialiser le projet Magento : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ddev
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">config
--project-type=magento --docroot=pub --create-docroot</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Installer Magento : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ddev
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">composer
create magento/project-community-edition</span></span></font></font></font></p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><br/>

</h3>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>Conclusion
:</strong></h3>
<p style="margin-bottom: 0.37cm">À ce stade, les développeurs
auront :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Une bonne compréhension des bases
	de Magento (structure, fichiers clé, API). 
	</p>
	<li><p style="margin-bottom: 0cm">Une instance Magento fonctionnelle
	installée via Composer. 
	</p>
	<li><p>Un environnement de développement isolé et optimal (Docker
	ou DDEV). 
	</p>
</ol>
<p style="margin-bottom: 0.37cm">Ils seront prêts à entrer dans le
vif du sujet avec <strong>le développement de modules personnalisés</strong>
dès le jour suivant.</p>
<p style="margin-bottom: 0.37cm"><a name="__DdeLink__934_2092794412"></a>
<strong><font size="5" style="font-size: 18pt">1.2 Préparer un
nouveau projet e-commerce</font></strong></p>
<h4 class="western"><strong>Objectif :</strong></h4>
<p style="margin-bottom: 0.37cm">Cette étape consiste à poser les
premières fondations pour notre projet e-commerce. Nous allons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Configurer Magento pour prendre en
	charge un <strong>catalogue multimarques</strong>, une
	fonctionnalité fréquemment utilisée dans des projets
	multi-boutiques, où plusieurs marques peuvent avoir chacune leurs
	propres catégories ou produits spécifiques. 
	</p>
	<li><p>Créer un <strong>thème Magento personnalisé</strong>
	(Frontend), qui servira de base pour toutes les personnalisations
	graphiques futures. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>A - Configurer Magento Backend pour un
catalogue multimarques</strong></h3>
<p style="margin-bottom: 0.37cm">Magento offre une puissante
fonctionnalité native compatible avec des projets <strong>multi-boutiques</strong>
ou <strong>multimarques</strong>. Cela permet de gérer plusieurs
instances de boutiques ou marques via une seule installation Magento.
Chaque &quot;boutique&quot; peut, par exemple, disposer de son propre
<strong>catalogue de produits</strong>, ses propres prix, devises ou
langues.</p>
<h4 class="western"><strong>A.</strong><strong>1. Concepts clés :
niveaux de structure dans Magento :</strong></h4>
<p style="margin-bottom: 0.37cm">Magento utilise une hiérarchie à <strong>3
niveaux</strong> pour organiser les structures multiboutiques :</p>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Global (Scope Global)</strong>
	: Affecte toute l'installation Magento. 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Exemples : Monnaies, options de
		configuration globales. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Site Web (Website)</strong>
	: Division principale. Chaque <strong>site web</strong> peut avoir
	sa propre base de clients, de devises et de catalogues de produits. 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Exemples : &quot;Site Européen&quot;,
		&quot;Site Américain&quot;. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Boutique (Store)</strong>
	: Chaque site web peut comporter plusieurs boutiques. Cela permet
	d’afficher des catalogues différents sous un même site web. 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Exemple : Une boutique
		&quot;Vêtements&quot; et une boutique &quot;Chaussures&quot; au
		sein du même site web. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Vue de la boutique (Store
	View)</strong> : Gestion des traductions ou affichages spécifiques.
		</p>
	<ul>
		<li><p>Exemples : Langues multiples (anglais, français, etc.). 
		</p>
	</ul>
</ol>
<p style="margin-bottom: 0.37cm">Cette architecture est idéale pour
des catalogues multimarques.</p>
<h4 class="western"><strong>A.</strong><strong>2. Création d'une
configuration multimarques :</strong></h4>
<h5 class="western"><strong>Étape 1 : Créer un nouveau &quot;site
web&quot; :</strong></h5>
<ol>
	<li><p style="margin-bottom: 0cm">Accédez à l’administration
	Magento :<br/>
<code class="western">Stores &gt; Settings &gt; All
	Stores</code>. 
	</p>
	<li><p style="margin-bottom: 0cm">Cliquez sur <strong>&quot;Create
	Website&quot;</strong>, puis fournissez les informations nécessaires
	: 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>Name</strong> : Nom
		explicite (ex. : &quot;Marque A&quot;). 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>Code</strong> : Code
		unique (ex. : <code class="western">marque_a</code>). 
		</p>
		<li><p><strong>Sort Order</strong> : Ordre d'affichage si plusieurs
		sites coexistent. 
		</p>
	</ul>
</ol>
<h5 class="western"><strong>Étape 2 : Ajouter une boutique à ce
site web :</strong></h5>
<ol>
	<li><p style="margin-bottom: 0cm">Accédez à nouveau à :<br/>
<code class="western">Stores
	&gt; Settings &gt; All Stores</code>. 
	</p>
	<li><p style="margin-bottom: 0cm">Cliquez sur <strong>&quot;Create
	Store&quot;</strong> : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Associez cette boutique au <strong>site
		web</strong> créé (ex. : &quot;Marque A&quot;). 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>Name</strong> : Nom clair
		(ex. : &quot;Boutique de Marque A&quot;). 
		</p>
		<li><p><strong>Root Category</strong> : Choisissez une catégorie
		racine (vous devrez probablement en créer une nouvelle pour chaque
		marque). 
		</p>
	</ul>
</ol>
<h5 class="western"><strong>Étape 3 : Configurer une vue de boutique
:</strong></h5>
<ol>
	<li><p style="margin-bottom: 0cm">Accédez à nouveau à :<br/>
<code class="western">Stores
	&gt; Settings &gt; All Stores</code>. 
	</p>
	<li><p style="margin-bottom: 0cm">Cliquez sur <strong>&quot;Create
	Store View&quot;</strong> : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Sélectionnez la boutique
		associée à votre site web (ex. : &quot;Boutique de Marque A&quot;).
				</p>
		<li><p style="margin-bottom: 0cm"><strong>Code</strong> :
		<code class="western">marque_a_fr</code> (par exemple pour la
		langue française). 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>Status</strong> :
		<code class="western">Enabled</code>. 
		</p>
		<li><p><strong>Sort Order</strong> : Définissez un ordre
		d'affichage. 
		</p>
	</ul>
</ol>
<h5 class="western"><strong>Étape 4 : Configurer des URLs propres
pour chaque marque :</strong></h5>
<p style="margin-bottom: 0.37cm">Une fois vos boutiques créées :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Modifiez leurs configurations
	d’URL individuelles : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>Stores &gt; Configuration
		&gt; General &gt; Web</strong>. 
		</p>
		<li><p style="margin-bottom: 0cm">Changez les valeurs de <code class="western">Base
		URL</code> pour chaque site web (ex. : <code class="western">https://marque-a.local/</code>).
				</p>
	</ul>
	<li><p>Modifiez votre fichier <code class="western">.htaccess</code>
	ou votre configuration serveur pour pointer chaque domaine ou
	sous-domaine vers les bons répertoires. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>B - Créer un thème personnalisé de
base</strong></h3>
<p style="margin-bottom: 0.37cm">Un thème Magento est essentiel car
il contrôle tous les aspects visuels de votre site. Ici, nous allons
créer un <strong>thème personnalisé basique</strong>, qui servira
de point de départ pour des ajustements esthétiques spécifiques à
votre catalogue.</p>
<h4 class="western"><strong>B.</strong><strong>1. Structure d’un
thème Magento</strong></h4>
<p style="margin-bottom: 0.37cm">Tous les thèmes Magento sont
organisés sous le dossier suivant :<br/>
<code class="western">app/design/frontend</code>.</p>
<p>La structure d’un thème personnalisé ressemble à ceci :</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/</span></span></font></font></font></strong><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">└──
design/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   └── frontend/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       └── VendorName/ThemeName/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ├── etc/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   └── view.xml</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ├── web/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   ├── css/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   ├── js/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   └── images/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ├── Magento_Theme/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   ├── templates/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   ├── layout/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   └── web/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ├── theme.xml</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           └── registration.php</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.</strong><strong>2.
Étape 1 : Déclarer le thème dans </strong><strong><code class="western">theme.xml</code></strong></h4>
<p style="margin-bottom: 0.37cm">Créez votre dossier de thème
:<br/>
<code class="western">app/design/frontend/MonEntreprise/MonTheme/</code>.</p>
<p>Dans ce dossier, ajoutez un fichier nommé <strong><code class="western">theme.xml</code></strong>,
qui contient des métadonnées pour déclarer le thème :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;theme
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework:Config/etc/theme.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;title&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Mon
Thème Personnalisé</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/title&gt;
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Nom du thème --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;parent&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento/blank</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/parent&gt;
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Héritage du thème Blank de Magento --&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/theme&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>I</strong><strong>mportant
:<br/>
Magento recommande d’utiliser Magento/blank comme parent
pour partir sur un design minimaliste, sauf si vous avez besoin d’un
thème plus riche graphiquement, auquel cas vous pourrez utiliser
Magento/luma comme parent.</strong></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.</strong><strong>3,
</strong><strong>Étape 2 : Enregistrer le thème dans Magento</strong></h4>
<p style="margin-bottom: 0.37cm">Créez un fichier nommé
<code class="western">registration.php</code> dans votre dossier de
thème :<br/>
<code class="western">app/design/frontend/MonEntreprise/MonTheme/registration.php</code>.</p>
<p>Voici le contenu :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Component\ComponentRegistrar;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ComponentRegistrar::</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">register</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ComponentRegistrar::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">THEME</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">frontend/MonEntreprise/MonTheme</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">__DIR__</span></i></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.</strong><strong>4.
Étape 3 : Configuration des médias avec </strong><strong><code class="western">view.xml</code></strong></h4>
<p style="margin-bottom: 0.37cm">Ajoutez un fichier <code class="western">view.xml</code>
dans :<br/>
<code class="western">app/design/frontend/MonEntreprise/MonTheme/etc/view.xml</code>.</p>
<p>Ce fichier permet de configurer les tailles des images utilisées
dans le thème. Exemple de contenu minimal :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;view
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework:Config/etc/view.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;media&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;images </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">module</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Magento_Catalog&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;image </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">id</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;category_page_grid&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">type</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;small_image&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;width&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">240</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/width&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;height&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">300</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/height&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;/image&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/images&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/media&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/view&gt;</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.</strong><strong>5.
Étape 4 : Appliquer le thème au site</strong></h4>
<p>Une fois votre thème créé :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Accédez au backend Magento
	:<br/>
<code class="western">Content &gt; Design &gt; Configuration</code>.
		</p>
	<li><p style="margin-bottom: 0cm">Cliquez sur &quot;Edit&quot; pour
	la boutique ou la vue à laquelle vous souhaitez assigner le thème.
		</p>
	<li><p style="margin-bottom: 0cm">Sélectionnez votre thème
	personnalisé dans le menu déroulant. 
	</p>
	<li><p>Videz le cache Magento pour appliquer les modifications : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cache:flush</span></span></font></font></font></p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><br/>
<br/>

</h3>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><br/>
<br/>

</h3>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Conclusion</strong></h3>
<p style="margin-bottom: 0.37cm">À la fin de cette étape, vous
aurez :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Une configuration Magento capable
	de supporter un <strong>catalogue multimarques</strong> grâce à la
	gestion multi-boutiques. 
	</p>
	<li><p>Un <strong>thème personnalisé de base</strong>, prêt pour
	des personnalisations avancées. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm">Vous êtes maintenant prêt à
passer aux customisations spécifiques pour améliorer l’apparence
et gérer vos produits via une intégration comme l’API Amazon lors
des sessions suivantes !</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__1290_2092794412"></a>
<br/>
<br/>

</h3>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm; page-break-before: always">
<strong><font size="5" style="font-size: 18pt">1.3. Introduction à
l’API Amazon</font></strong></h3>
<h4 class="western"><strong>Objectif :</strong></h4>
<p style="margin-bottom: 0.37cm">L’objectif de cette section est de
comprendre et de maîtriser les bases de l’Amazon <strong>Product
Advertising API</strong> (PA API). Cette API permet d'accéder aux
données produits d'Amazon pour les intégrer dans un autre site,
notamment pour afficher des fiches produits, récupérer des
catégories, ou même réaliser des associations publicitaires.</p>
<p style="margin-bottom: 0.37cm">Nous allons explorer :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Les concepts clés de l'API :
	Authentification, gestion des clés API et points d'accès
	(endpoints). 
	</p>
	<li><p style="margin-bottom: 0cm">L’analyse de la documentation
	officielle pour extraire des informations pertinentes. 
	</p>
	<li><p>Les outils pour tester l'API, comme <strong>Postman</strong>
	et <strong>cURL</strong>. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong><font size="4" style="font-size: 16pt">A.
Concepts clés de l’Amazon Product Advertising API</font></strong></h3>
<p style="margin-bottom: 0.37cm">L'Amazon Product Advertising API
permet de :</p>
<ul>
	<li><p style="margin-bottom: 0cm">Rechercher des produits sur la
	base de critères spécifiques (nom, catégorie, ID ASIN...). 
	</p>
	<li><p style="margin-bottom: 0cm">Accéder aux détails produits :
	images, description, prix, stock, liens affiliés, etc. 
	</p>
	<li><p style="margin-bottom: 0cm">Explorer des catégories ou types
	de produits. 
	</p>
	<li><p>Récupérer des recommandations basées sur des produits. 
	</p>
</ul>
<h4 class="western"><strong><font size="4" style="font-size: 14pt">A.</font></strong><strong><font size="4" style="font-size: 14pt">1.
Authentification à l'API</font></strong></h4>
<p style="margin-bottom: 0.37cm">Pour accéder à l'API, Amazon exige
une authentification stricte. Vous devez fournir une signature
numérique pour chaque requête, basée sur :</p>
<ul>
	<li><p style="margin-bottom: 0cm">Une <strong>clé d'accès
	publique</strong>. 
	</p>
	<li><p style="margin-bottom: 0cm">Une <strong>clé secrète</strong>.
		</p>
	<li><p style="margin-bottom: 0cm">L'<strong>horodatage</strong> de
	la requête. 
	</p>
	<li><p>Les paramètres d'URL (organisés par ordre alphabétique). 
	</p>
</ul>
<p style="margin-bottom: 0.37cm">La signature est un hash HMAC-SHA256
généré à partir de ces éléments.</p>
<h5 class="western"><strong><font size="3" style="font-size: 12pt">Étape
1 : Récupérer vos clés d’accès</font></strong></h5>
<ol>
	<li><p style="margin-bottom: 0cm">Créez un compte avec le <strong>programme
	Amazon Associates</strong> :<br/>
Lien Amazon Associates. 
	</p>
	<li><p style="margin-bottom: 0cm">Rendez-vous dans la section <strong>API
	Tools</strong>. 
	</p>
	<li><p style="margin-bottom: 0cm">Générez vos clés d’accès : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>Access Key ID</strong> :
		clé publique utilisée pour identifier vos requêtes. 
		</p>
		<li><p><strong>Secret Access Key</strong> : clé privée utilisée
		pour signer vos requêtes. 
		</p>
	</ul>
</ol>
<p style="margin-bottom: 0.37cm">Lorsque vous travaillez avec des
clés, assurez-vous de ne jamais exposer votre <strong>Secret Access
Key</strong> (dans un projet open-source par exemple).</p>
<h5 class="western"><strong><font size="3" style="font-size: 12pt">Étape
2 : Les Headers obligatoires pour l'authentification</font></strong></h5>
<p style="margin-bottom: 0.37cm">Pour chaque requête, les headers
suivants doivent être inclus :</p>
<ol>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">Host</code></strong>
	: L'URL de l'endpoint ciblé (ex. : <code class="western">webservices.amazon.com</code>).
		</p>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">X-Amz-Date</code></strong>
	: Timestamp UTC sous format ISO8601 (ex. : <code class="western">20231103T120000Z</code>).
		</p>
	<li><p><strong><code class="western">Authorization</code></strong> :
	Contient la signature d'authentification générée. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm">Vous pouvez utiliser des librairies
tierces comme <strong>AWS SDK for PHP</strong> qui simplifient la
gestion de la signature.</p>
<h5 class="western"><strong><font size="3" style="font-size: 12pt">Exemple
de signature (en PHP)</font></strong><font size="3" style="font-size: 12pt">
:</font></h5>
<p>Voici un exemple de génération manuelle d'une signature :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$method
= 'GET';</span></span></font></font></font></strong><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$host
= 'webservices.amazon.com';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$uri
= '/paapi5/searchitems';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$accessKey
= '&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">VotreAccessKey</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$secretKey
= '&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">VotreSecretKey</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$region
= 'us-east-1';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$service
= 'ProductAdvertisingAPI';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$timestamp
= gmdate('Ymd\THis\Z');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$date
= gmdate('Ymd');</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$params
= [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'Keywords' =&gt; 'laptop',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'Marketplace' =&gt; 'www.amazon.com',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'PartnerTag' =&gt; '&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">VotrePartnerTag</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'PartnerType' =&gt; 'Associates',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'ItemCount' =&gt; 10,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'Resources' =&gt; [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       'Images.Primary.Medium',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       'ItemInfo.Title',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       'ItemInfo.Features',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       'Offers.Listings.Price'</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$queryString
= http_build_query($params, '', '&amp;', PHP_QUERY_RFC3986);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">//
Construction de la chaîne pour la signature</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$canonicalRequest
= implode(&quot;\n&quot;, [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $method,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $uri,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $queryString,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &quot;host:$host&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &quot;x-amz-date:$timestamp&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   '',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &quot;host;x-amz-date&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   hash('sha256', '')</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$stringToSign
= implode(&quot;\n&quot;, [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &quot;AWS4-HMAC-SHA256&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $timestamp,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &quot;$date/$region/$service/aws4_request&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   hash('sha256', $canonicalRequest)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$signingKey
= hash_hmac('sha256', $date, &quot;AWS4$secretKey&quot;,
true);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$signingKey
= hash_hmac('sha256', $region, $signingKey, true);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$signingKey
= hash_hmac('sha256', $service, $signingKey, true);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$signingKey
= hash_hmac('sha256', 'aws4_request', $signingKey, true);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$signature
= hash_hmac('sha256', $stringToSign, $signingKey);</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><strong>Vous inclurez cette
signature dans vos headers </strong><strong><code class="western">Authorization</code></strong><strong>.</strong></p>
<h4 class="western"><strong><font size="4" style="font-size: 14pt">A.</font></strong><strong><font size="4" style="font-size: 14pt">2.
Endpoints et gestion des régions</font></strong></h4>
<p><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm">L'API propose différents points
d'accès (endpoints) en fonction des zones géographiques ou marchés
cibles. Voici quelques exemples :</p>
<ul>
	<li><p style="margin-bottom: 0cm">US : <code class="western">webservices.amazon.com</code>
		</p>
	<li><p style="margin-bottom: 0cm">FR : <code class="western">webservices.amazon.fr</code>
		</p>
	<li><p>UK : <code class="western">webservices.amazon.co.uk</code> 
	</p>
</ul>
<p style="margin-bottom: 0.37cm">Votre configuration de requête
(<code class="western">Marketplace</code>) doit correspondre à la
région choisie.</p>
<h4 class="western"><strong><font size="4" style="font-size: 14pt">A.</font></strong><strong><font size="4" style="font-size: 14pt">3.
Analyse de la documentation officielle</font></strong></h4>
<p><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm">La documentation officielle reste la
source la plus fiable pour maîtriser la <strong>Product Advertising
API</strong> :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Documentation officielle de l'API
	Amazon PA5. 
	</p>
	<li><p style="margin-bottom: 0cm">Les concepts clés expliqués : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Requêtes disponibles :
		<code class="western">SearchItems</code>, <code class="western">GetItems</code>,
		<code class="western">GetVariations</code>, etc. 
		</p>
		<li><p style="margin-bottom: 0cm">Paramètres à inclure dans les
		requêtes. 
		</p>
		<li><p>Ressources retournées : informations détaillées sur les
		produits (Images, Prix, Évaluations, etc.). 
		</p>
	</ul>
</ol>
<p style="margin-bottom: 0.37cm">Chaque méthode contient des
exemples prêts à tester.</p>
<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western"><strong><font size="4" style="font-size: 16pt">B.
Outils pour tester l'API</font></strong></h3>
<p style="margin-bottom: 0.37cm">Un des points essentiels dans la
prise en main d'une API comme celle d'Amazon est de la tester
efficacement. Magento étant une plateforme back-end, la phase de
test est cruciale avant d’implémenter l’API dans vos modules.</p>
<h4 class="western"><strong><font size="4" style="font-size: 14pt">B.</font></strong><strong><font size="4" style="font-size: 14pt">1.
Postman</font></strong></h4>
<p>Postman est un outil graphique permettant de :</p>
<ul>
	<li><p style="margin-bottom: 0cm">Construire des requêtes API. 
	</p>
	<li><p style="margin-bottom: 0cm">Ajouter des clés
	d'authentification. 
	</p>
	<li><p>Voir les réponses et les détails des erreurs (statuts HTTP,
	corps JSON). 
	</p>
</ul>
<h5 class="western"><font size="3" style="font-size: 12pt">Étapes
pour utiliser Postman :</font></h5>
<p><br/>
<br/>

</p>
<ol>
	<li><p style="margin-bottom: 0cm">Créez une nouvelle requête dans
	Postman (GET par exemple). 
	</p>
	<li><p style="margin-bottom: 0cm">Appliquez les headers nécessaires
	: 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>Authorization</strong> :
		Clé générée (voir étape d'authentification). 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>x-amz-date</strong> :
		Timestamp. 
		</p>
	</ul>
	<li><p>Ajoutez les paramètres dans l’URL : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">https://webservices.amazon.fr/paapi5/searchitems?Keywords=laptop&amp;Marketplace=www.amazon.fr</span></span></font></font></font></strong></p>
<p style="margin-bottom: 0.37cm"><strong>Envoyez la requête et
vérifiez : </strong>
</p>
<ol start="4">
	<ul>
		<li><p style="margin-bottom: 0cm">Code HTTP <code class="western">200</code>
		: Succès. 
		</p>
		<li><p>Si <code class="western">403</code>, vérifiez votre
		signature ou permissions. 
		</p>
	</ul>
</ol>
<h4 class="western"><br/>
<br/>

</h4>
<h4 class="western"><br/>
<br/>

</h4>
<h4 class="western"><strong><font size="4" style="font-size: 14pt">B.</font></strong><strong><font size="4" style="font-size: 14pt">2.
cURL</font></strong></h4>
<p>Pour les développeurs préférant la ligne de commande, <strong>cURL</strong>
est une excellente alternative.</p>
<h5 class="western"><font size="3" style="font-size: 12pt">Exemple de
requête de recherche d'articles :</font></h5>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">curl
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">-X
GET \</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'https://webservices.amazon.fr/paapi5/searchitems?Keywords=laptop&amp;Marketplace=www.amazon.fr'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    -H </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'x-amz-date:
20231103T120000Z'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
\</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    -H </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'Authorization:
AWS4-HMAC-SHA256 Credential=&lt;VotreAccessKey&gt;/....../[Signature]'</span></span></font></font></font></p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Conclusion</strong></h3>
<p style="margin-bottom: 0.37cm">À la fin de cette section, les
participants auront :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Une compréhension approfondie des
	<strong>concepts de l'Amazon PA API</strong>, notamment
	l'authentification et la gestion des clés. 
	</p>
	<li><p style="margin-bottom: 0cm">La possibilité de tester leurs
	implémentations en utilisant soit <strong>Postman</strong>, soit
	<strong>cURL</strong>. 
	</p>
	<li><p>Les bases nécessaires pour intégrer cette API dans un
	projet Magento (via des modules ou services personnalisés). 
	</p>
</ol>
<p><br/>
<br/>

</p>
<p><strong>Livrables du Jour 1 :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">Installation fonctionnelle de
	Magento. 
	</p>
	<li><p style="margin-bottom: 0cm">Thème minimal prêt pour être
	personnalisé. 
	</p>
	<li><p>Premiers tests de requêtes vers l’API Amazon. 
	</p>
</ul>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__1559_2092794412"></a>
<strong><font size="5" style="font-size: 18pt">II - </font></strong><strong><font size="5" style="font-size: 18pt">Jour
2 : Développement du module d’importation des produits</font></strong></h3>
<h4 class="western">Objectif : Construire un module permettant de
récupérer et de stocker les produits externes dans Magento.</h4>
<p><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><a name="__DdeLink__1561_2092794412"></a>
<strong><font color="#000000"><font face="JetBrains Mono, serif"><font size="3" style="font-size: 12pt"><span style="font-style: normal">2.1.
Création d’un module Magento</span></font></font></font></strong></h3>
<p style="margin-bottom: 0.37cm">Voici le détail des étapes pour
créer et activer un module Magento 2.</p>
<hr/>

<h4 class="western"><strong>Structure de base du module</strong></h4>
<p style="margin-bottom: 0.37cm">Dans Magento 2, la structure des
modules est bien définie et suit une convention stricte. Les modules
personnalisés sont généralement placés dans le dossier <code class="western">app/code</code>.</p>
<h5 class="western"><strong>1. Chemin du module</strong></h5>
<p>Créez l’arborescence suivante dans votre projet Magento :</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">└──
code/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   └── MyNamespace/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       └── AmazonIntegration/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ├── registration.php</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ├── etc/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           │   └── module.xml</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           └── etc/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               └── di.xml</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Chaque
dossier et fichier a une finalité que nous allons expliquer en
détail ci-dessous.</span></span></font></font></font></p>
<hr/>

<h4 class="western"><strong>2. Créer les fichiers nécessaires</strong></h4>
<h5 class="western"><strong>2.1. Fichier </strong><strong><code class="western">registration.php</code></strong></h5>
<p style="margin-bottom: 0.37cm">Ce fichier permet à Magento de
<strong>déclarer et enregistrer</strong> le nouveau module dans le
système.</p>
<p style="margin-bottom: 0.37cm">Chemin :
<code class="western">app/code/MyNamespace/AmazonIntegration/registration.php</code></p>
<p>Contenu :</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Component\ComponentRegistrar;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ComponentRegistrar::</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">register</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ComponentRegistrar::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">MODULE</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace_AmazonIntegration</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">__DIR__</span></i></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal">2.2.
Fichier </span></font></font></font></strong><strong><code class="western"><font color="#bcbec4"><font size="2" style="font-size: 10pt"><span style="font-style: normal">module.xml</span></font></font></code></strong></h5>
<p style="margin-bottom: 0.37cm">Le fichier <code class="western">module.xml</code>
déclare le module au cœur du framework Magento et définit ses
dépendances éventuelles par rapport aux autres modules.</p>
<p style="margin-bottom: 0.37cm">Chemin :
<code class="western">app/code/MyNamespace/AmazonIntegration/etc/module.xml</code></p>
<p>Contenu :</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;config
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework:Module/etc/module.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;module </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace_AmazonIntegration&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setup_version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;sequence&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Dépendances éventuelles sur d'autres modules Magento --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;module
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Magento_Catalog&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/sequence&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/module&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/config&gt;</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal">Explications
:</span></font></font></font></strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">setup_version</code></strong>
	: Définit la version du module. Cela sera utile pour les mises à
	jour futures. 
	</p>
	<li><p><strong><code class="western">sequence</code></strong> :
	Déclare des modules qui doivent être chargés <strong>avant</strong>
	celui-ci. Ici, nous dépendons du module <code class="western">Magento_Catalog</code>,
	car nous interagirons avec le catalogue des produits. 
	</p>
</ul>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal">2.3.
Fichier </span></font></font></font></strong><strong><code class="western"><font color="#bcbec4"><font size="2" style="font-size: 10pt"><span style="font-style: normal">di.xml</span></font></font></code></strong></h5>
<p style="margin-bottom: 0.37cm">Le fichier <code class="western">di.xml</code>
sert à configurer les dépendances de type <strong>Dependency
Injection (DI)</strong> dans Magento. C'est ici que nous définirons
les services ou classes qui seront injectés dans notre module.</p>
<p style="margin-bottom: 0.37cm">Chemin :
<code class="western">app/code/MyNamespace/AmazonIntegration/etc/di.xml</code></p>
<p>Contenu initial minimal :</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;config
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework/ObjectManager/etc/config.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Exemple : Déclarations futures de préférence ou d'injections pour
ce module --&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/config&gt;</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Voici
un </span></span></font></font></font><strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal">contenu
initial vide</span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
car les configurations spécifiques (services, interfaces) seront
ajoutées plus tard lorsque nous ajouterons de la logique
métier.<br/>
Pour l’instant, gardons ce fichier dans la structure.</span></span></font></font></font></p>
<hr/>

<h4 class="western"><strong>3. Activation du module via le CLI
Magento</strong></h4>
<p style="margin-bottom: 0.37cm">Une fois la structure et les
fichiers nécessaires créés, activons le module dans Magento.</p>
<h5 class="western"><strong>3.1. Vérifier la configuration initiale</strong></h5>
<p>Magento détecte automatiquement les modules en analysant les
fichiers de configuration comme <code class="western">registration.php</code>
et <code class="western">module.xml</code>. Avant de l'activer :</p>
<ol>
	<li><p><strong>Assurez-vous que la structure suivante existe :</strong>
		</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/code/MyNamespace/AmazonIntegration/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ├── registration.php</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ├── etc/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ├── module.xml</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ├── di.xml</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Vérifiez
que les noms (</span></span></font></font></font><code class="western"><font color="#bcbec4"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace_AmazonIntegration</span></span></font></font></code><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
sont cohérents dans tous les fichiers. </span></span></font></font></font>
</p>
<hr/>

<h5 class="western"><strong>3.2. Commande pour activer le module via
CLI :</strong></h5>
<p>Exécutez les commandes suivantes depuis la racine de votre projet
Magento (là où se trouve votre fichier <code class="western">bin/magento</code>).</p>
<ol>
	<li><p><strong>Mettre à jour les configurations Magento</strong> : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
setup:upgrade</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Cette
commande :</span></span></font></font></font></p>
<ul>
	<li><p style="margin-bottom: 0cm">Vérifie et enregistre tous les
	nouveaux modules définis (comme notre <code class="western">AmazonIntegration</code>).
		</p>
	<li><p>Exécute les scripts associés aux installations de modules
	(comme les migrations, etc.). 
	</p>
</ul>
<ol start="2">
	<li><p><strong>Vérifier que le module est bien activé</strong> :
	Après avoir exécuté <code class="western">setup:upgrade</code>,
	utilisez la commande suivante pour lister les modules activés : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
module:status</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Si
le module est correctement activé, vous verrez qu’il est marqué
comme </span></span></font></font></font><code class="western"><font color="#bcbec4"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">enabled</span></span></font></font></code><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></font></font></font></p>
<hr/>

<h5 class="western"><strong>3.3. Optionnel : vider le cache</strong></h5>
<p>Si vous ne voyez pas les modifications ou si Magento ne détecte
pas le nouveau module immédiatement, videz le cache Magento&nbsp;</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cache:flush</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal">4.
Résultat attendu</span></font></font></font></strong></h4>
<p style="margin-bottom: 0.37cm">Si tout est correctement configuré
:</p>
<ol>
	<li><p style="margin-bottom: 0cm">Magento reconnaît le nouveau
	module <strong><code class="western">MyNamespace_AmazonIntegration</code></strong>.
		</p>
	<li><p style="margin-bottom: 0cm">Le fichier <code class="western">module.xml</code>
	déclare correctement le module et celui-ci est officiellement
	activé. 
	</p>
	<li><p>La commande <code class="western">php bin/magento
	module:status</code> retournera une liste affichant
	<strong><code class="western">MyNamespace_AmazonIntegration :
	enabled</code></strong>. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm">Vous avez maintenant une structure
de base prête pour commencer à écrire le code métier de votre
module, comme l'importation des produits d'Amazon&nbsp;!</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>2.2.
Intégration avec l’API Amazon</strong></h3>
<h4 class="western"><strong>Objectif :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Créer un service PHP dans Magento
	dédié à l’interrogation de l'Amazon Product Advertising API. 
	</p>
	<li><p style="margin-bottom: 0cm">Gérer l'authentification en
	générant des signatures avec les clés d’accès. 
	</p>
	<li><p style="margin-bottom: 0cm">Effectuer une requête GET vers
	Amazon et récupérer les données produits sous format JSON. 
	</p>
	<li><p>Logger les réponses pour vérifier que les données sont
	correctement récupérées. 
	</p>
</ol>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><br/>
<br/>

</h3>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Etapes
détaillées :</strong></h3>
<h4 class="western"><strong>A. Création d’un service dédié dans
Magento</strong></h4>
<p style="margin-bottom: 0.37cm">Un service dans Magento est
simplement une classe PHP dédiée qui contient la logique métier.
Pour interroger l’API Amazon, nous allons créer une classe et lui
associer l'authentification et la requête GET.</p>
<hr/>

<h5 class="western"><strong>1. Structure du dossier et classe de
service</strong></h5>
<p>Créez le dossier suivant dans votre module pour organiser le code
de votre service :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/</span></span></font></font></font></strong><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">└──
code/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   └── MyNamespace/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       └── AmazonIntegration/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           └── Model/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               └── Service/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   └── ProductApiService.php</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong><code class="western">ProductApiService.php</code></strong><strong>
: Fichier pour gérer la communication avec l'API.</strong></p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>2.
Code de base pour le service :</strong></h5>
<p style="margin-bottom: 0.37cm">Chemin du fichier :
<code class="western">app/code/MyNamespace/AmazonIntegration/Model/Service/ProductApiService.php</code></p>
<p>Voici le contenu de départ de la classe :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Model\Service;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Psr\Log\LoggerInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductApiService</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$accessKey;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$secretKey;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$partnerTag;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$host;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$region;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@var
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">LoggerInterface</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$logger;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * ProductApiService constructor.</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">LoggerInterface
$logger</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       LoggerInterface $logger</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;logger = $logger;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Remplacez ici par vos propres clés et informations Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;accessKey
= '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">VOTRE_ACCESS_KEY</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';
</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;secretKey = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">VOTRE_SECRET_KEY</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';
</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;partnerTag = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">VOTRE_PARTNER_TAG</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;host = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">webservices.amazon.fr</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';
//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Endpoint FR</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;region
= '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">eu-west-1</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';
 //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Région AWS</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Méthode pour effectuer une requête GET vers l'API Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
array</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
$queryParams</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
array</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">|</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">null</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">array
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$queryParams):
?</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">array</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $uri = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/paapi5/searchitems</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $method = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">GET</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $timestamp = gmdate('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Ymd\THis\Z</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $date = gmdate('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Ymd</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Ajouter les paramètres obligatoires</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$queryParams['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">PartnerTag</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= $this-&gt;partnerTag;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $queryParams['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">PartnerType</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Associates</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $queryParams['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Marketplace</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">www.amazon.fr</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Génération de la chaîne de requête</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$queryString
= http_build_query($queryParams, '', '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&amp;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">PHP_QUERY_RFC3986</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Construction de la chaîne pour la signature</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$canonicalRequest
= implode(&quot;</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">\n</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $method,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $uri,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $queryString,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">host:</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$this-&gt;host}&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">x-amz-date:</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$timestamp}&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           '',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">host;x-amz-date</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           hash('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'')</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $stringToSign = implode(&quot;</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">\n</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AWS4-HMAC-SHA256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $timestamp,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
          
&quot;{$date}</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$this-&gt;region}</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/ProductAdvertisingAPI/aws4_request</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           hash('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$canonicalRequest)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $signingKey = $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getSignatureKey</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($this-&gt;secretKey,
$date, $this-&gt;region, '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductAdvertisingAPI</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $signature = hash_hmac('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$stringToSign, $signingKey);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Construction de l'URL complète</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$url
= &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">https://</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$this-&gt;host}{$uri}</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$queryString}&quot;;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Configuration des headers de la requête</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$headers
= [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Content-Type:
application/json; charset=utf-8</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Host:
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$this-&gt;host}&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">X-Amz-Date:
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$timestamp}&quot;,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Authorization:
AWS4-HMAC-SHA256
Credential=</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$this-&gt;accessKey}</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$date}</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$this-&gt;region}</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/ProductAdvertisingAPI/aws4_request,
SignedHeaders=host;x-amz-date, Signature=</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$signature}&quot;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Effectuer la requête avec cURL</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$response
= $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">executeCurl</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($url,
$headers);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Logger la réponse pour vérifier les résultats</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($response)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">info</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Amazon
API Response: </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">response</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $response]);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$response
? json_decode($response, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
: </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">null</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Générer la clé de signature</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getSignatureKey</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($key,
$date, $region, $service)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $kDate = hash_hmac('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$date, &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AWS4</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{$key}&quot;,
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $kRegion = hash_hmac('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$region, $kDate, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $kService = hash_hmac('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$service, $kRegion, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $kSigning = hash_hmac('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sha256</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">aws4_request</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$kService, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$kSigning;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Exécuter une requête cURL</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">executeCurl</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($url,
$headers)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $ch = curl_init();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       curl_setopt($ch, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CURLOPT_URL</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
$url);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       curl_setopt($ch, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CURLOPT_HTTPHEADER</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
$headers);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       curl_setopt($ch, </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CURLOPT_RETURNTRANSFER</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $response = curl_exec($ch);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(curl_errno($ch))
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">error</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Amazon
API cURL Error: </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
. curl_error($ch));</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       curl_close($ch);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$response;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.
Logger les réponses</strong></h4>
<p style="margin-bottom: 0.37cm">Nous avons inclus l’utilisation de
la <strong>Psr\Log\LoggerInterface</strong>, qui permet de logger les
réponses de l’API dans les logs Magento. Une fois l'API interrogée
avec succès, les réponses seront enregistrées dans les logs pour
vous permettre d’analyser les données récupérées.</p>
<p style="margin-bottom: 0.37cm">Chemin des logs dans Magento
:<br/>
<code class="western">var/log/system.log</code></p>
<hr/>

<h4 class="western"><strong>C. Test du service</strong></h4>
<p style="margin-bottom: 0.37cm">Pour tester la classe
<code class="western">ProductApiService</code>, nous pouvons soit
créer une commande CLI, soit un simple script de test dans Magento.
En voici un exemple avec une requête simple :</p>
<h5 class="western">Créer une commande CLI pour exécuter le test :</h5>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Dossier de la commande
	CLI</strong> :<br/>
Créez un fichier dans
	:<br/>
<code class="western">app/code/MyNamespace/AmazonIntegration/Console/Command/</code></p>
	<li><p><strong>Exemple de commande CLI</strong> :</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Console\Command;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\App\State;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Model\Service\ProductApiService;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Symfony\Component\Console\Command\Command;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Symfony\Component\Console\Input\InputInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Symfony\Component\Console\Output\OutputInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">TestApiCommand
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">extends
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Command</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productApiService;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(ProductApiService
$productApiService, State $state)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productApiService = $productApiService;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $state-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setAreaCode</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">frontend</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">parent</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">protected
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">configure</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazonintegration:api:test</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           -&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setDescription</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Tester
le service de l</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">\'</span></i></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">API
Amazon.</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">protected
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">execute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(InputInterface
$input, OutputInterface $output)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $params = ['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Keywords</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">laptop</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ItemCount</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">5</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $response = $this-&gt;productApiService-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($params);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $output-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">writeln</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Réponse
API :</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $output-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">writeln</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(json_encode($response,
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">JSON_PRETTY_PRINT</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">));</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Command::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">SUCCESS</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>3 </strong><strong>Enregistrer
la commande :<br/>
Ajoutez la commande CLI dans </strong><strong><code class="western">etc/di.xml</code></strong><strong>
: </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;type
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Symfony\Component\Console\Application&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;arguments&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;argument </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;commands&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:type</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;array&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;item </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;TestApiCommand&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:type</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;object&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Console\Command\TestApiCommand</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/item&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/argument&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/arguments&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/type&gt;</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><strong>4 </strong><strong>Tester
la commande : Exécutez la commande suivante pour tester l'API : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
amazonintegration:api:test</span></span></font></font></font></p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Conclusion</strong></h3>
<p style="margin-bottom: 0.37cm">Après ces étapes, vous aurez :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Un service fonctionnel pour
	interroger l'API Amazon avec des clés d’accès. 
	</p>
	<li><p style="margin-bottom: 0cm">Une méthode pour recevoir et
	logger les données produits dans Magento. 
	</p>
	<li><p>Un outil CLI pour tester les appels API en développement. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<ul>
	<li><h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__3477_2092794412"></a>
	<strong>2.3. Enregistrement des produits en base (catalogue Magento)</strong></h3>
</ul>
<h4 class="western"><strong>Objectif :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Mapper les données reçues de
	l'Amazon API (JSON) avec les entités produits de Magento (<code class="western">Product</code>).
		</p>
	<li><p style="margin-bottom: 0cm">Ajouter ces produits au catalogue
	Magento en suivant les bonnes pratiques : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Utilisation des <strong>Data
		Objects</strong> et des <strong>Service Contracts</strong>. 
		</p>
	</ul>
	<li><p>Gérer les erreurs potentielles d'import (manque de données,
	duplication, etc.). 
	</p>
</ol>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Étapes
détaillées :</strong></h3>
<h4 class="western"><strong>A. Mapper les données de l'API Amazon
avec les entités Magento</strong></h4>
<ol>
	<li><p><strong>Décomposer les données reçues de l'API
	Amazon</strong><br/>
L'API Amazon renvoie généralement les
	produits sous format <code class="western">JSON</code>. Voici un
	exemple que nous allons mapper : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Items&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;ASIN&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;B08N5WRWNW&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;ItemInfo&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Title&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Amazon
Echo (4th Gen)&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Features&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Premium
sound&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Smart
home enabled&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Alexa
built-in&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           },</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Offers&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Listings&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Price&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;DisplayAmount&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;€99.99&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Amount&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;99.99&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Currency&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;EUR&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               ]</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           },</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Images&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Primary&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Medium&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;URL&quot;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;https://images-eu.ssl-images-amazon.com/images/I/714Rq4k05UL._AC_SX679_.jpg&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ]</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><strong>Structure des produits
Magento (Product Entity)</strong><br/>
Voici les principaux attributs
de l'entité Produit dans Magento 2 :</p>
<ol start="2">
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>sku</strong> :
		identifiant unique du produit. 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>name</strong> : nom du
		produit. 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>price</strong> : prix du
		produit. 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>description</strong> :
		description (optionnelle). 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>image</strong> : URL de
		l'image principale (optionnelle). 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>type_id</strong> : type
		de produit (par défaut : <code class="western">simple</code> pour
		des produits standard). 
		</p>
		<li><p><strong>attribute_set_id</strong> : groupe de propriétés
		associées au produit (<code class="western">default</code> pour
		les produits simples). 
		</p>
	</ul>
	<p style="margin-bottom: 0.37cm">Nous allons mapper les données de
	l'API Amazon à ces attributs correspondants :</p>
</ol>
<dl>
	<dd>
	<table cellpadding="2" cellspacing="2">
		<tr>
			<th style="border: none; padding: 0cm"><p>Donnée API Amazon</p>
			</th>
			<th style="border: none; padding: 0cm"><p>Attribut Magento</p>
			</th>
		</tr>
		<tr>
			<td style="border: none; padding: 0cm"><p><code class="western">ASIN</code></p>
			</td>
			<td style="border: none; padding: 0cm"><p><code class="western">sku</code></p>
			</td>
		</tr>
		<tr>
			<td style="border: none; padding: 0cm"><p><code class="western">ItemInfo.Title</code></p>
			</td>
			<td style="border: none; padding: 0cm"><p><code class="western">name</code></p>
			</td>
		</tr>
		<tr>
			<td style="border: none; padding: 0cm"><p><code class="western">Offers.Listings.Price.Amount</code></p>
			</td>
			<td style="border: none; padding: 0cm"><p><code class="western">price</code></p>
			</td>
		</tr>
		<tr>
			<td style="border: none; padding: 0cm"><p><code class="western">ItemInfo.Features</code></p>
			</td>
			<td style="border: none; padding: 0cm"><p><code class="western">description</code></p>
			</td>
		</tr>
		<tr>
			<td style="border: none; padding: 0cm"><p><code class="western">Images.Primary.Medium.URL</code></p>
			</td>
			<td style="border: none; padding: 0cm"><p><code class="western">image</code>
				(pour l'import d'image)</p>
			</td>
		</tr>
	</table>
</dl>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.
Ajouter les produits via les Data Objects et Service Contracts</strong></h4>
<p style="margin-bottom: 0.37cm">Dans Magento, nous utilisons les
<strong>Service Contracts</strong> (interfaces fournies par Magento)
pour travailler avec les entités comme les produits. Cela garantit :</p>
<ul>
	<li><p style="margin-bottom: 0cm">La compatibilité avec
	l'architecture Magento. 
	</p>
	<li><p>Une meilleure maintenance et évolutivité du code. 
	</p>
</ul>
<h5 class="western">Les principales interfaces que nous allons
utiliser :</h5>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong><code class="western">\Magento\Catalog\Api\ProductRepositoryInterface</code></strong>
	:<br/>
Permet d’enregistrer ou de supprimer des produits dans la
	base.</p>
	<li><p style="margin-bottom: 0.37cm"><strong><code class="western">\Magento\Catalog\Api\Data\ProductInterface</code></strong>
	:<br/>
Représente un objet produit pour Magento.</p>
	<li><p style="margin-bottom: 0.37cm"><strong><code class="western">\Magento\Framework\Api\SearchCriteriaBuilder</code></strong>
	:<br/>
Permet de rechercher et vérifier les produits existants (par
	exemple, si un produit avec un SKU existe déjà).</p>
</ol>
<hr/>

<h5 class="western"><strong>Étape 1 : Service pour enregistrer les
produits dans Magento</strong></h5>
<p style="margin-bottom: 0.37cm">Créez une classe dédiée pour
gérer l'enregistrement des produits.</p>
<p style="margin-bottom: 0.37cm">Chemin du fichier
:<br/>
<code class="western">app/code/MyNamespace/AmazonIntegration/Model/Service/ProductImportService.php</code></p>
<p>Contenu du fichier :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Model\Service;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\ProductRepositoryInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\Data\ProductInterfaceFactory;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Model\ResourceModel\Product\CollectionFactory
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">as
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductCollectionFactory;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\CategoryLinkManagementInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Exception\CouldNotSaveException;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Exception\LocalizedException;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Psr\Log\LoggerInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductImportService</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productFactory;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$logger;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productCollectionFactory;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$categoryLinkManagement;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductRepositoryInterface $productRepository,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductInterfaceFactory $productFactory,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductCollectionFactory $productCollectionFactory,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       CategoryLinkManagementInterface $categoryLinkManagement,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       LoggerInterface $logger</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productRepository = $productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productFactory = $productFactory;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;logger = $logger;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productCollectionFactory =
$productCollectionFactory;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;categoryLinkManagement = $categoryLinkManagement;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Importer un produit à partir des données de l'API Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
array</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
$amazonProductData</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
void</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@throws
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">LocalizedException</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">importProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">array
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$amazonProductData)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">try
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $sku = $amazonProductData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ASIN</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $name = $amazonProductData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ItemInfo</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Title</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $price =
$amazonProductData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Offers</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Listings</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'][</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">0</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Amount</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $description = implode(&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,
$amazonProductData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ItemInfo</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Features</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $imageUrl =
$amazonProductData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Images</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Primary</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Medium</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">URL</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $existingProduct =
$this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">findExistingProductBySku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($sku);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($existingProduct)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               $this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">info</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(sprintf('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Le
produit avec le SKU %s existe déjà dans le catalogue.</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$sku));</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           /** </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@var
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Catalog</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Api</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Data</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductInterface
$product </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product = $this-&gt;productFactory-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setSku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($sku);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($name);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setPrice</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($price);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setDescription</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($description);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setTypeId</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">simple</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setAttributeSetId</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">4</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);
//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
ID du default attribute set</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setVisibility</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">4</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);
//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Catalog et recherche</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
          
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setStatus</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Magento\Catalog\Model\Product\Attribute\Source\Status::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">STATUS_ENABLED</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setStockData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">qty</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">100</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_in_stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">1</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;productRepository-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">save</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">info</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Produit
importé avec succès : </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
. $sku);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       } </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">catch
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(CouldNotSaveException
$e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">error</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Impossible
d</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">\'</span></i></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">importer
le produit : </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
. $e-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getMessage</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">());</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       } </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">catch
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Exception
$e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">error</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Erreur
inattendue : </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
. $e-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getMessage</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">());</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Rechercher un produit existant par SKU</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
string</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
$sku</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Catalog</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Api</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Data</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductInterface</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">|</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">null</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">findExistingProductBySku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">string
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$sku)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $collection = $this-&gt;productCollectionFactory-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $collection-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">addFieldToFilter</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$sku);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$collection-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getFirstItem</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getId</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
? $collection-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getFirstItem</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
: </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">null</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>C.
Gestion des erreurs d'import</strong></h4>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Vérifier les données
	reçues de l'API avant l'import.</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm">Par exemple, si le champ <code class="western">ASIN</code>
		ou <code class="western">Offers</code> est manquant, éviter de
		briser le flux de l'application. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0.37cm"><strong>Logger les erreurs
	critiques.</strong><br/>
Toutes les erreurs d’import sont
	enregistrées dans <code class="western">var/log/system.log</code>
	pour des vérifications ultérieures.</p>
	<li><p style="margin-bottom: 0.37cm"><strong>Éviter les doublons</strong>
	:<br/>
Comme dans l'exemple ci-dessus, la méthode
	<code class="western">findExistingProductBySku</code> vérifie si un
	produit existe déjà avant de tenter de l’ajouter.</p>
</ol>
<hr/>

<h3 class="western"><strong>Test de l'import</strong></h3>
<p style="margin-bottom: 0.37cm">Pour tester, nous pourrons appeler
la méthode <code class="western">importProduct</code> avec un
tableau de données directement dans une commande CLI ou un script
PHP.</p>
<p>Exemple :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productImportService-&gt;importProduct($amazonProductData);</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<ul>
	<li><p style="margin-bottom: 0.37cm"><strong>Livrables du Jour 2 :</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm">Module Magento basique
		fonctionnel. 
		</p>
		<li><p>Les produits sont intégrés au catalogue Magento depuis
		l'API. 
		</p>
	</ul>
</ul>
<hr/>

<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western"><br/>
<br/>

</h3>
<p style="page-break-before: always"><br/>
<br/>

</p>
<h3 class="western"><a name="__DdeLink__4661_2092794412"></a><strong>Jour
3 : Frontend - Affichage des produits</strong></h3>
<h4 class="western">Objectif : Personnaliser le frontend pour
afficher dynamiquement les produits importés dans Magento.</h4>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__4665_2092794412"></a>
<strong>3.1. Personnalisation du thème pour afficher les produits
Amazon</strong></h3>
<p style="margin-bottom: 0.37cm">Nous allons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Créer un design spécifique pour
	la <strong>page d'accueil</strong> ou une autre page de votre choix.
		</p>
	<li><p style="margin-bottom: 0cm">Ajouter dynamiquement les produits
	à travers des <strong>fichiers XML</strong> et un fichier <strong>.phtml</strong>.
		</p>
	<li><p>Afficher les produits dans un <strong>bloc ou widget</strong>
	au sein du thème. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<h4 class="western"><strong>A. Structure du thème personnalisé</strong></h4>
<p style="margin-bottom: 0.37cm">Avant de commencer, assurez-vous
d'avoir un <strong>thème Magento actif</strong> sur lequel appliquer
les personnalisations.</p>
<p>Emplacement des fichiers de votre thème :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/{Vendor}/{Theme}/</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm">Si vous utilisez le thème de base
<strong>Luma</strong>, vous pouvez le copier et créer un <strong>nouveau
thème enfant</strong> pour éviter de modifier directement le thème
principal.</p>
<hr/>

<h4 class="western"><strong>B. Modifier le layout XML pour ajouter un
bloc de produits</strong></h4>
<p style="margin-bottom: 0.37cm">Magento utilise des fichiers <strong>XML
de mise en page (layout XML)</strong> pour structurer le contenu des
pages. Le but est d’ajouter un bloc personnalisé pour afficher les
produits liés à Amazon à l’aide de nos données.</p>
<h5 class="western"><strong>1. Chemin du layout XML pour la page
d'accueil</strong></h5>
<p>Créez ou modifiez le fichier suivant dans votre thème
personnalisé :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/{Vendor}/{Theme}/Magento_Theme/layout/cms_index_index.xml</span></span></font></font></font></p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>2.
Contenu du fichier </strong><strong><code class="western">cms_index_index.xml</code></strong></h5>
<p>Ce fichier XML permet de définir des blocs sur la page d’accueil.
Ajoutez un bloc pour les produits importés :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;page
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework:View/Layout/etc/page_configuration.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;body&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Ajout d’un container pour afficher les produits Amazon --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;referenceContainer
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;content&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;block
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace\AmazonIntegration\Block\ProductList&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon.product.list&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">template</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace_AmazonIntegration::products.phtml&quot;
</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/referenceContainer&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/body&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/page&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">referenceContainer
	name=&quot;content&quot;</code></strong> : Ajoute le bloc dans la
	section principale de la page. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">block
	class</code></strong> : Référence à une classe PHP (Block) qui
	fournira les données des produits. 
	</p>
	<li><p><strong><code class="western">template</code></strong> :
	Fichier <code class="western">.phtml</code> que nous allons créer
	pour la mise en page. 
	</p>
</ul>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>C.
La classe PHP du bloc</strong></h4>
<p style="margin-bottom: 0.37cm">Le <strong>bloc</strong> est une
classe qui permet de passer des données du backend (Magento) au
fichier <code class="western">.phtml</code>.</p>
<ol>
	<li><p style="margin-bottom: 0.37cm">Créez la classe <code class="western">ProductList</code>
	dans votre module :<br/>
Chemin
	:<br/>
<code class="western">app/code/MyNamespace/AmazonIntegration/Block/ProductList.php</code></p>
	<li><p>Contenu de la classe <code class="western">ProductList</code>
	:</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Block;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\ProductRepositoryInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\View\Element\Template;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductList
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">extends
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Template</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productRepository;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Template\Context $context,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductRepositoryInterface $productRepository,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">array
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$data
= []</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">parent</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($context,
$data);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productRepository = $productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Récupère une liste de produits Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
array</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getAmazonProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $result = [];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Exemple : Récupération des produits liés à Amazon (marqués avec
un SKU spécifique comme &quot;AMAZON-&quot;)</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$searchCriteria
=
$this-&gt;_objectManager-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Magento\Framework\Api\SearchCriteriaBuilder::</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           -&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">addFilter</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AMAZON-%</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">like</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $products =
$this-&gt;productRepository-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getList</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($searchCriteria);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">foreach
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($products-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getItems</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
as $product) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $result[] = [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getPrice</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">image</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getImageUrl</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">url</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getProductUrl</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$result;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Récupère l’URL de l’image du produit</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Catalog</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Api</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Data</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductInterface
$product</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
string</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">|</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">null</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getImageUrl</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $imageHelper =
$this-&gt;_objectManager-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Magento\Catalog\Helper\Image::</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$imageHelper-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">init</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product,
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product_base_image</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getUrl</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">La méthode <code class="western">getAmazonProducts</code>
	filtre les produits par SKU (les produits Amazon ayant un préfixe
	comme <code class="western">AMAZON-</code>). 
	</p>
	<li><p>Elle renvoie un tableau contenant les données nécessaires
	pour l’affichage : nom, prix, image, et URL. 
	</p>
</ul>
<hr/>

<h4 class="western"><strong>D. Fichier PHTML pour afficher la liste
des produits</strong></h4>
<p style="margin-bottom: 0.37cm">Créez le fichier <strong><code class="western">products.phtml</code></strong>,
relié au template spécifié dans <code class="western">cms_index_index.xml</code>.</p>
<p>Chemin du fichier :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/{Vendor}/{Theme}/MyNamespace_AmazonIntegration/templates/products.phtml</span></span></font></font></font></p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Contenu
de </strong><strong><code class="western">products.phtml</code></strong><strong>
:</strong></h5>
<p>Voici un exemple de code HTML pour afficher les produits dans une
grille dynamique :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/**
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@var
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AmazonIntegration</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Block</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductList
$block </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$products
= $block-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getAmazonProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon-products</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h2</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Produits
Amazon&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h2</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(!empty($products)):
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">products-grid</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">foreach
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($products
as $product): ?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product-item</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">a
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">href</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?=
$product['url'] ?&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">img
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">src</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?=
$product['image'] ?&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">alt</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?=
$product['name'] ?&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;
/&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h3</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;&lt;?=
$product['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?&gt;&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h3</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">p</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Prix
: &lt;?= $product['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?&gt; €&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">p</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   &lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">a</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">endforeach</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">else</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">p</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Aucun
produit Amazon trouvé.&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">p</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">endif</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font></p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>CSS
suggéré pour styliser la grille de produits :</strong></h5>
<p style="margin-bottom: 0.37cm">Ajoutez le fichier CSS suivant à
votre thème :<br/>
Chemin :
<code class="western">app/design/frontend/{Vendor}/{Theme}/web/css/source/_module.less</code></p>
<p>Contenu CSS :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon-products
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">products-grid
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">display</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">flex</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">flex-wrap</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">wrap</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">gap</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">20</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product-item
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">border</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">1</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px
solid </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">#ddd</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">padding</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">10</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">max-width</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">200</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">text-align</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">center</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product-item
img </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">max-width</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">100</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">%;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">height</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">auto</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product-item
h3 </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">font-size</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">1.1</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">rem</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">margin</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">10</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">0</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product-item
p </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">color</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">#555</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm">Compilez les styles avec :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
setup:static-content:deploy</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>E.
Ajouter les produits Amazon dans des blocs ou widgets</strong></h4>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Option avec Widgets
	Magento</strong> :<br/>
Vous pouvez également associer votre bloc
	avec les produits Amazon en créant un <strong>widget Magento</strong>.
	Cela permet à l’administrateur de positionner ce bloc directement
	via l’interface backend.</p>
	<li><p style="margin-bottom: 0.37cm"><strong>Blocs supplémentaires</strong>
	:<br/>
Si les produits Amazon doivent être affichés sur plusieurs
	pages, pensez à inclure le bloc dans des fichiers XML de mise en
	page personnalisés pour d'autres pages comme la page catégorie ou
	produit.</p>
</ol>
<hr/>

<h3 class="western"><strong>Test et résultat</strong></h3>
<p>Après avoir ajouté les modifications :</p>
<ol>
	<li><p>Videz les caches : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cache:flush</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm">2 Rechargez la
page d’accueil. 
</p>
<p style="margin-bottom: 0.37cm">Vous devriez voir un <strong>bloc de
produits importés d’Amazon</strong> affiché dynamiquement avec le
design défini dans le fichier <code class="western">.phtml</code>.</p>
<hr/>

<h3 class="western"><strong>Conclusion</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette partie, nous avons appris
à :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Ajouter un <strong>bloc
	personnalisé</strong> sur la page d’accueil via un fichier XML. 
	</p>
	<li><p style="margin-bottom: 0cm">Récupérer dynamiquement les
	produits Amazon via une classe PHP, en utilisant les <strong>Service
	Contracts</strong>. 
	</p>
	<li><p>Afficher ces produits dans une mise en page stylisée et
	responsive à l’aide d’un fichier <code class="western">.phtml</code>
	et un peu de CSS. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__7325_2092794412"></a>
<strong>3.2. Personnalisation d’une page produit dédiée pour les
produits Amazon</strong></h3>
<h4 class="western"><strong>Objectifs :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Créer une vue personnalisée pour
	les produits Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Ajouter des informations
	spécifiques (telles que la disponibilité, les notes) provenant de
	l’API Amazon. 
	</p>
	<li><p>Modifier les templates <code class="western">.phtml</code> et
	utiliser des helpers Magento pour afficher les données sur les
	pages des produits. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Création d'une vue produit pour les
produits Amazon</strong></h4>
<p style="margin-bottom: 0.37cm">Magento vous permet de cibler les
types de produits spécifiques ou des critères particuliers (comme
le SKU ou des attributs personnalisés) pour personnaliser les pages
produit.</p>
<h5 class="western"><strong>1. Identifier les produits Amazon</strong></h5>
<p style="margin-bottom: 0.37cm">Pour différencier les produits
Amazon, on peut utiliser :</p>
<ul>
	<li><p style="margin-bottom: 0cm">Un <strong>préfixe spécifique
	dans le SKU</strong>. 
	</p>
	<li><p>Un <strong>attribut personnalisé</strong> (par ex. :
	<code class="western">is_amazon_product</code>) défini dans Magento
	pour indiquer que le produit provient de l’API Amazon. 
	</p>
</ul>
<p style="margin-bottom: 0.37cm">Si cet attribut n'existe pas encore,
vous pouvez le créer dans l’administration de Magento sous <strong>Stores
&gt; Attributes &gt; Product</strong>, ou via un script PHP.</p>
<hr/>

<h5 class="western"><strong>2. Modifier le fichier XML de mise en
page des pages produit</strong></h5>
<p style="margin-bottom: 0.37cm">Pour afficher les informations
spécifiques aux produits Amazon, ajoutez un bloc dédié dans la
page produit, uniquement pour les produits identifiés comme Amazon.</p>
<p><strong>Chemin du fichier de layout XML pour la page produit :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{Vendor}/{Theme}/Magento_Catalog/layout/catalog_product_view.xml</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Contenu du fichier
</strong><strong><code class="western">catalog_product_view.xml</code></strong><strong>
:</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;page
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework:View/Layout/etc/page_configuration.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;body&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Ajouter un bloc dans la page produit --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;referenceBlock
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;product.info.main&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Si le produit est identifié comme Amazon, afficher un template de
données spécifiques --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;block
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace\AmazonIntegration\Block\ProductView&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon.product.info&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">before</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;-&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">template</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace_AmazonIntegration::product/amazon_info.phtml&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Transmet un paramètre supplémentaire au block --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;arguments&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   &lt;argument </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;is_amazon_product&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:type</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;boolean&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">true</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/argument&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;/arguments&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;/block&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/referenceBlock&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/body&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/page&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">On insère un bloc personnalisé
	dans la section principale du contenu produit (<code class="western">product.info.main</code>).
		</p>
	<li><p><strong>Condition spécifique :</strong> On peut contrôler
	l'affichage dans le fichier PHTML (<code class="western">amazon_info.phtml</code>)
	selon un attribut du produit, comme <code class="western">is_amazon_product</code>.
		</p>
</ul>
<hr/>

<h4 class="western"><strong>B. Ajouter une classe PHP pour les
données spécifiques</strong></h4>
<p style="margin-bottom: 0.37cm">Créez une nouvelle classe
<code class="western">ProductView</code> pour gérer les données
spécifiques des produits Amazon.</p>
<p><strong>Chemin de la classe PHP :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/code/MyNamespace/AmazonIntegration/Block/ProductView.php</span></span></font></font></font></strong></p>
<p style="margin-bottom: 0.37cm"><strong>Contenu de </strong><strong><code class="western">ProductView.php</code></strong><strong>
:</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Block;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\ProductRepositoryInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Registry;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\View\Element\Template;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductView
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">extends
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Template</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$registry;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Template\Context $context,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductRepositoryInterface $productRepository,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Registry $registry,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">array
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$data
= []</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">parent</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($context,
$data);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productRepository = $productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;registry = $registry;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Récupère le produit courant</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Catalog</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Api</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Data</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductInterface</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">|</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">null</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCurrentProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;registry-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">registry</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">current_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Vérifie si le produit est un produit Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
bool</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">isAmazonProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $product = $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCurrentProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product
&amp;&amp; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')
&amp;&amp;
$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Récupère les informations spécifiques à Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
array</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">|</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">null</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getAmazonSpecificData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(!$this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">isAmazonProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">())
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">null</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $product = $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCurrentProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">availability</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon_availability</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
?? '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Non
spécifié</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">rating</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon_rating</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
?? '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Aucune
note</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">source</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon_source</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
?? '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Amazon</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">getCurrentProduct()</code></strong>
	: Récupère le produit actuel sur la vue produit. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">isAmazonProduct()</code></strong>
	: Vérifie si le produit est un produit Amazon via l'attribut
	personnalisé <code class="western">is_amazon_product</code>. 
	</p>
	<li><p><strong><code class="western">getAmazonSpecificData()</code></strong>
	: Récupère des données spécifiques comme la disponibilité ou
	les notes. 
	</p>
</ul>
<hr/>

<h4 class="western"><strong>C. Créer le fichier PHTML pour afficher
les informations spécifiques</strong></h4>
<p style="margin-bottom: 0.37cm">Créez un fichier PHTML dédié pour
afficher les données spécifiques.</p>
<p><strong>Chemin du fichier :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{Vendor}/{Theme}/MyNamespace_AmazonIntegration/templates/product/amazon_info.phtml</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Contenu du fichier PHTML :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/**
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@var
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AmazonIntegration</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Block</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductView
$block </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product
= $block-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCurrentProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$data
= $block-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getAmazonSpecificData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($block-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">isAmazonProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
&amp;&amp; $data): ?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon-product-info</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h3</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Informations
spécifiques Amazon&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h3</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ul</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Disponibilité
:&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;
&lt;?= $data['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">availability</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?&gt;&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Notes
:&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;
&lt;?= $data['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">rating</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?&gt;&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;&lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;Source
:&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;
&lt;?= $data['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">source</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?&gt;&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ul</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">endif</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
?&gt;</span></span></font></font></font></p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>D.
Modifier les styles CSS (optionnel)</strong></h3>
<p style="margin-bottom: 0.37cm">Pour styliser le bloc où les
informations spécifiques apparaissent :</p>
<p><strong>Chemin du fichier LESS :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{Vendor}/{Theme}/web/css/source/_module.less</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">.</span></span></font></font></font></strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon-product-info
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">background-color</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">#f9f9f9</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">padding</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">15</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">border</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">1</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px
solid </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">#ddd</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">margin-top</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">20</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">h3
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">font-size</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">1.2</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">rem</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">color</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">#555</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ul
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">list-style</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">none</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">padding</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">0</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">li
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">margin</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">10</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">px
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">0</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">strong
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">color</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:
</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">#333</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Compilez les styles avec :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
setup:static-content:deploy</span></span></font></font></font></p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>E.
Vider le cache et vérifier</strong></h3>
<ol>
	<li><p><strong>Videz le cache :</strong> 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cache:flush</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>	2. </strong><strong>Rechargez
la page produit dans le navigateur. <br/>
Le bloc affichant les
informations spécifiques liées aux produits Amazon doit maintenant
apparaître uniquement pour les produits identifiés. </strong>
</p>
<hr/>

<h3 class="western"><strong>Résultat attendu</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm">Une section supplémentaire
	intitulée <strong>Informations spécifiques Amazon</strong>
	apparaît sur les pages des produits Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Cette section affiche des détails
	tels que : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Disponibilité, notes, et source
		de récupération. 
		</p>
	</ul>
	<li><p>Les produits non-Amazon n'afficheront pas ce bloc, respectant
	la condition définie. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette étape, nous avons vu
comment :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Personnaliser l’affichage des
	<strong>pages produit</strong> pour afficher des données
	spécifiques aux produits Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Modifier le layout XML pour
	ajouter un bloc dynamique conditionnel. 
	</p>
	<li><p style="margin-bottom: 0cm">Créer une classe PHP pour
	connecter les données backend aux templates frontend. 
	</p>
	<li><p>Ajouter un fichier <code class="western">.phtml</code> pour
	afficher les informations spécifiques, avec un design simple et
	stylisé. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__8539_2092794412"></a>
<strong>3.3. Mise en place des filtres et recherches</strong></h3>
<h4 class="western"><strong>Objectifs :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Utiliser les <strong>facettes</strong>
	natives de Magento pour permettre la recherche et le filtrage des
	produits importés d'Amazon. 
	</p>
	<li><p>Configurer les couches de navigation pour la recherche et les
	catégories afin d'ajouter des filtres basés sur vos besoins (prix,
	disponibilité, notes Amazon, etc.). 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Utilisation des facettes natives
Magento pour rechercher les produits importés</strong></h4>
<p style="margin-bottom: 0.37cm">Magento propose un système de
recherche avancée avec des filtres (facettes) qui peuvent être
configurés pour explorer et rechercher les produits dans votre
catalogue.</p>
<h5 class="western"><strong>1. Identifier et configurer vos attributs
pour les facettes</strong></h5>
<p style="margin-bottom: 0.37cm">Pour inclure les produits Amazon
dans la recherche et permettre leur filtrage :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Créez un <strong>attribut
	personnalisé</strong> (par exemple, <code class="western">is_amazon_product</code>)
	s'il n'existe pas encore. 
	</p>
	<li><p>Ajoutez cet attribut aux <strong>attributs de recherche</strong>.
		</p>
</ol>
<h5 class="western"><strong>Étape pour ajouter un attribut dans la
recherche :</strong></h5>
<ul>
	<li><p style="margin-bottom: 0cm">Allez dans <strong>Stores &gt;
	Attributes &gt; Product</strong> (dans l’Admin). 
	</p>
	<li><p style="margin-bottom: 0cm">Sélectionnez l’attribut (par
	exemple : <code class="western">is_amazon_product</code>) ou
	créez-en un si nécessaire. 
	</p>
	<li><p style="margin-bottom: 0cm">Configurez les propriétés
	suivantes : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>Use in Search</strong> :
		Oui 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>Use in Layered Navigation</strong>
		: Oui 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>Use for Filterable (with
		results)</strong> : Oui 
		</p>
		<li><p><strong>Comparable on Frontend</strong> : Oui (si
		nécessaire) 
		</p>
	</ul>
</ul>
<h6 class="western"><strong>Exemple d’attribut utile :</strong></h6>
<ul>
	<li><p style="margin-bottom: 0cm"><code class="western">is_amazon_product</code>
	: Booléen (Oui/Non). 
	</p>
	<li><p style="margin-bottom: 0cm"><code class="western">amazon_availability</code>:
	Liste déroulante (Disponible, Hors stock, etc.). 
	</p>
	<li><p><code class="western">amazon_rating</code>: Décimal (avec
	des notes comme <code class="western">4.5, 5.0, etc.</code> pour
	filtres par évaluation). 
	</p>
</ul>
<p style="margin-bottom: 0.37cm">Une fois les attributs configurés,
passez à la prochaine étape.</p>
<hr/>

<h5 class="western"><strong>2. Inclure les produits Amazon dans les
résultats de recherche</strong></h5>
<p>Magento utilise des indexes pour optimiser les résultats de
recherche. Assurez-vous que les produits importés possèdent les
attributs nécessaires.</p>
<ol>
	<li><p style="margin-bottom: 0cm">Vérifiez que les produits Amazon
	ont un ou plusieurs attributs distinctifs (par exemple, un attribut
	<code class="western">is_amazon_product</code>). 
	</p>
	<li><p>Mettez à jour l'indexation : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
indexer:reindex</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.
Configurer les couches de navigation pour les pages catégories et
recherche</strong></h4>
<h5 class="western"><strong>1. Activer Layered Navigation pour les
catégories</strong></h5>
<p style="margin-bottom: 0.37cm">Si vous souhaitez appliquer des
filtres aux produits dans une page catégorie spécifique (et pas
uniquement dans la recherche) :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Assurez-vous que vos <strong>catégories
	sont ancrées</strong> (anchored). 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Allez dans <strong>Catalog &gt;
		Categories</strong>. 
		</p>
		<li><p style="margin-bottom: 0cm">Sélectionnez une catégorie
		parent ou enfant où les produits Amazon seront visibles. 
		</p>
		<li><p>Dans les paramètres, réglez <strong>Is Anchor</strong> sur
		<strong>Oui</strong>. 
		</p>
	</ul>
</ol>
<p style="margin-bottom: 0.37cm">Cela permet d'activer les couches de
navigation (layered navigation) pour cette catégorie.</p>
<hr/>

<h5 class="western"><strong>2. Configurer les filtres de navigation
pour les produits Amazon</strong></h5>
<p style="margin-bottom: 0.37cm">Avec Magento, vous pouvez configurer
quels attributs seront disponibles dans les couches de navigation
(layered navigation).</p>
<h6 class="western"><strong>Lister les attributs dans la navigation
filtrée :</strong></h6>
<p style="margin-bottom: 0.37cm">Dans les propriétés de chaque
attribut (voir <strong>Stores &gt; Attributes &gt; Product</strong>)
:</p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>&quot;Use in Layered
	Navigation&quot;</strong> : activez pour permettre leur utilisation
	dans les filtres. 
	</p>
	<li><p><strong>&quot;Use for Sorting in Product Listing&quot;</strong>
	: activez si vous souhaitez permettre un tri spécifique. 
	</p>
</ul>
<h6 class="western"><strong>Exemple de filtres utiles :</strong></h6>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Disponibilité Amazon
	(amazon_availability)</strong> : &quot;Disponible&quot; ou &quot;Hors
	stock&quot;. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Notes (amazon_rating)</strong>
	: pour filtrer les produits selon leur évaluation (vous pouvez
	créer des plages fixes comme <code class="western">4-5 étoiles</code>,
	<code class="western">3-4 étoiles</code>, etc.). 
	</p>
	<li><p><strong>Type de produit (is_amazon_product)</strong> : pour
	séparer les produits Amazon des autres. 
	</p>
</ol>
<p>Regénérer ces filtres :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cache:flush</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>C.
Ajouter les facettes personnalisées sur la vue</strong></h4>
<p style="margin-bottom: 0.37cm">Magento ajoute automatiquement les
attributs activés comme filtres dans la vue catégories ou dans les
résultats de recherche. Cela peut être utilisé pour spécifiquement
permettre de filtrer les produits Amazon.</p>
<p style="margin-bottom: 0.37cm">Si nécessaire, vous pouvez
personnaliser les aspects de ces facettes via le fichier XML ou en
modifiant les templates.</p>
<h5 class="western"><strong>Modifier le layout XML des catégories et
résultats de recherche :</strong></h5>
<p><strong>Chemin des layouts :</strong></p>
<ul>
	<li><p><strong>Catégorie :</strong> 
	</p>
</ul>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{Vendor}/{Theme}/Magento_Catalog/layout/catalog_category_view.xml</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Recherche : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{Vendor}/{Theme}/Magento_Search/layout/catalogsearch_result_index.xml</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Exemple pour filtrer
uniquement les produits Amazon :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;page
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework:View/Layout/etc/page_configuration.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;body&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Personnalisation des filtres pour la recherche --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;referenceBlock
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;catalog.leftnav&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;block
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Magento\LayeredNavigation\Block\Navigation&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon.filters&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">template</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Magento_LayeredNavigation::filters.phtml&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;arguments&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   &lt;argument </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;is_amazon_product&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:type</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;string&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">true</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/argument&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;/arguments&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;/block&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/referenceBlock&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/body&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/page&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Ce fragment replace le
catalog.leftnav (menus de navigation filtrée) avec un but précis :
l'ajout ou le ciblage des produits Amazon.</strong></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>D.
Mise en page frontend : Personnaliser les facettes</strong></h4>
<p>Vous pouvez personnaliser le template pour les facettes si vous
souhaitez modifier leur rendu visuel ou leur ordre.</p>
<ol>
	<li><p><strong>Chemin du fichier de facettes :</strong> 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">vendor/magento/module-layered-navigation/view/frontend/templates/layer/view.phtml</span></span></font></font></font></strong></p>
<p style="margin-bottom: 0.37cm"><strong>Copiez ce fichier dans votre
thème : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/design/frontend/</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{Vendor}/{Theme}/Magento_LayeredNavigation/templates/layer/view.phtml</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Personnalisez la disposition
ou l’ordre des facettes affichées. Par exemple, affichez d’abord
les produits Amazon uniquement : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php
</span></span></font></font></font></strong><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">foreach
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($block-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getFilters</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
as $filter): ?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($filter-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
== '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'):
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;!--</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Afficher le filtre Amazon en priorité </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">filter-item</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;?= $filter-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getHtml</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">div</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;?php </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">endif</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
?&gt;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">endforeach</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
?&gt;</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>E.
Tester les filtres et résultats</strong></h4>
<ol>
	<li><p><strong>Videz les caches et recompilez</strong> : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cache:flush</span></span></font></font></font><br/>
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
setup:upgrade</span></span></font></font></font><br/>
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
indexer:reindex</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Accédez à : </strong>
</p>
<ol start="2">
	<ul>
		<li><p style="margin-bottom: 0cm">Une catégorie configurée pour
		afficher les produits Amazon avec filtres. 
		</p>
		<li><p>La page de recherche et testez les facettes disponibles. 
		</p>
	</ul>
</ol>
<hr/>

<h3 class="western"><strong>Résultat attendu :</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm">Les <strong>produits Amazon
	importés</strong> sont visibles dans les résultats de recherche
	et/ou dans les pages des catégories configurées. 
	</p>
	<li><p style="margin-bottom: 0cm">Les utilisateurs peuvent filtrer
	facilement les produits Amazon en utilisant des <strong>facettes
	adaptées</strong> (disponibilité, notes, type de produit, etc.). 
	</p>
	<li><p>Les couches de navigation pour les catégories utilisent des
	<strong>filtres spécifiques</strong> définis pour vos produits
	importés. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette étape, nous avons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Activé les <strong>facettes
	natives Magento</strong> pour rechercher et filtrer les produits
	Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Configuré les filtres pour les
	couches de navigation des catégories. 
	</p>
	<li><p>Ajouté des personnalisations possibles via les layouts XML
	et les templates <code class="western">.phtml</code>. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<ul>
	<li><p style="margin-bottom: 0.37cm"><strong>Livrables du Jour 3 :</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm">Les produits Amazon s’affichent
		sur le site. 
		</p>
		<li><p>Pages produits personnalisées. 
		</p>
	</ul>
</ul>
<hr/>

<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western" style="page-break-before: always"><a name="__DdeLink__8845_2092794412"></a>
<strong>Jour 4 : Gestion avancée : panier, commandes,
synchronisation avec l'API</strong></h3>
<h4 class="western">Objectif : Ajouter des fonctionnalités
e-commerce clés (panier, commandes) pour les produits tiers.</h4>
<p style="margin-bottom: 0.37cm"><a name="__DdeLink__8849_2092794412"></a>
<br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>4.1.
Gérer le panier pour les produits importés</strong></h3>
<h4 class="western"><strong>Objectifs :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Permettre l'ajout des produits
	Amazon au panier Magento (avec gestion spécifique si nécessaire). 
	</p>
	<li><p>Manipuler le panier via des requêtes backend (côté
	serveur) et frontend (côté interface client). 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Permettre l'ajout des produits Amazon
au panier Magento</strong></h4>
<p style="margin-bottom: 0.37cm">Les produits importés d'Amazon
fonctionnent comme des produits catalogués dans Magento. Cependant,
selon les scénarios, des étapes spécifiques doivent être
effectuées pour assurer une intégration complète au panier.</p>
<p style="margin-bottom: 0.37cm">Magento utilise son composant <strong>quote
(panier)</strong> pour gérer les produits ajoutés. Les produits
suivent un processus standard avec des <strong>observers</strong>
Magento pour gérer leur ajout et leurs validations.</p>
<hr/>

<h5 class="western"><strong>1. Créer/Configurer un observer pour
gérer les produits Amazon dans le panier</strong></h5>
<p>Magento permet d'utiliser des <strong>Events</strong> pour
personnaliser le comportement de ses fonctionnalités. Vous pouvez
intervenir au moment où un produit est ajouté au panier via
l’événement :<br/>
<strong><code class="western">sales_quote_add_item</code></strong>.</p>
<ul>
	<li><p><strong>Objectif</strong> : Vérifier que le produit
	appartient à Amazon et lui appliquer un traitement ou une
	restriction si nécessaire (par exemple, valider la disponibilité
	via l’API Amazon avant l’ajout au panier). 
	</p>
</ul>
<h6 class="western"><strong>Création d’un observer :</strong></h6>
<ol>
	<li><p><strong>Chemin</strong> :<br/>
Fichier d'événement dans
	<strong>app/code/MyNamespace/AmazonIntegration/etc/events.xml</strong>
	: 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;config
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework/Event/etc/events.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;event </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;sales_quote_add_item&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;observer </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;validate_amazon_product_add_to_cart&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">instance</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace\AmazonIntegration\Observer\QuoteAddItem&quot;
</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/event&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/config&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Classe de l’Observer :
Créez le fichier
app/code/MyNamespace/AmazonIntegration/Observer/QuoteAddItem.php : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Observer;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Event\Observer;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Event\ObserverInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Message\ManagerInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">QuoteAddItem
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">implements
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ObserverInterface</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$messageManager;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(ManagerInterface
$messageManager)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;messageManager = $messageManager;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">execute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(Observer
$observer)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $item = $observer-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getEvent</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getQuoteItem</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $product = $item-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Vérifiez si le produit est un produit Amazon (via un attribut ou
autre)</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')
&amp;&amp;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
          
$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
== </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">1</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Exemple : Effectuer une vérification d’API pour la disponibilité</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$availability
= $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">checkAmazonAvailability</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getSku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">());</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(!$availability)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Supprimer l’élément du panier</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$item-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getQuote</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">removeItem</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($item-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getItemId</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">());</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               $this-&gt;messageManager-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">addErrorMessage</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Le
produit Amazon n’est plus disponible.</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Exemple : Vérifie la disponibilité via l'API Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
string</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
$sku</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
bool</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">checkAmazonAvailability</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($sku)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Implémentez une logique pour appeler l'API Amazon et vérifier la
disponibilité</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Retour temporaire pour exemple</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>2.
Manipuler l’ajout au panier via un contrôleur personnalisé (Si
besoin)</strong></h5>
<p>Si vous souhaitez personnaliser profondément l’ajout des
produits (par ex : en appelant directement l’API Amazon pour
ajouter un produit au panier), vous pouvez créer un contrôleur
dédié.</p>
<ol>
	<li><p><strong>Créer une route pour l’ajout personnalisé au
	panier :</strong> Créez le fichier
	<strong>app/code/MyNamespace/AmazonIntegration/etc/frontend/routes.xml</strong>
	: 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;config
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework/App/etc/routes.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;router </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">id</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;standard&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;route </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">id</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon_cart&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">frontName</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon_cart&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;module </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace_AmazonIntegration&quot;
</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/route&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/router&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/config&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Créer le contrôleur pour
gérer l’ajout au panier Amazon : Chemin :
app/code/MyNamespace/AmazonIntegration/Controller/Cart/Add.php </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Controller\Cart;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Checkout\Model\Cart;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\App\Action\Action;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\App\Action\Context;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Controller\Result\JsonFactory;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\ProductRepositoryInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Add
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">extends
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Action</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$cart;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$resultJsonFactory;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Context $context,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Cart $cart,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductRepositoryInterface $productRepository,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       JsonFactory $resultJsonFactory</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">parent</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($context);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;cart = $cart;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productRepository = $productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;resultJsonFactory = $resultJsonFactory;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">execute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $result = $this-&gt;resultJsonFactory-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $productId = $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getRequest</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getParam</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">product_id</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $quantity = $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getRequest</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getParam</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">qty</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">1</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">try
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product =
$this-&gt;productRepository-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getById</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productId);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Ajout au panier</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;cart-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">addProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product,
['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">qty</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $quantity]);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;cart-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">save</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$result-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">success</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">message</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Produit
ajouté au panier.</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       } </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">catch
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Exception
$e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$result-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">success</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">false</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">message</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $e-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getMessage</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()]);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Exemple d’URL :<br/>
Une
fois configuré, vous pourrez appeler cette route via une URL comme
:<br/>
</strong><strong><code class="western">/amazon_cart/cart/add?product_id=123&amp;qty=2</code></strong></p>
<hr/>

<h4 class="western"><strong>B. Manipuler le panier via Frontend</strong></h4>
<p>Vous pouvez ensuite interagir avec ces fonctionnalités à travers
AJAX ou JavaScript.</p>
<ol>
	<li><p><strong>JavaScript pour ajouter des produits au panier via
	AJAX</strong> : Exemple d’appel AJAX pour le contrôleur défini
	ci-dessus : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">require</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">([</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'jquery'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">],
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">function
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $(</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'#add-amazon-product'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">).on(</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'click'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">function
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">const
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">productId
= $(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">this</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">).data(</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'product-id'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">const
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">qty
= </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">1</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">//
ou une autre valeur</span></span></font></font></font><br/>
<br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$.ajax({</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           url: </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'/amazon_cart/cart/add'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           type: </span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'GET'</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           data: { product_id: productId, qty: qty },</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           success: </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">function
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(response)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(response.success)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   alert(response.message);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               } </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">else
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   alert(</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'Erreur
: ' </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">+
response.message);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       });</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   });</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">});</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Dans votre fichier PHTML :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;button
</span></span></font></font></font></strong><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">id</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;add-amazon-product&quot;
</span></span></font></font></font><font color="#bababa"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">data-product-id</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;&lt;?=
$product-&gt;getId() ?&gt;&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Ajouter
au panier</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/button&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Activer les messages
frontend Magento : Pour afficher des erreurs ou des succès
concernant le panier, vous pouvez utiliser les messages natifs de
Magento (success, error, etc.). </strong>
</p>
<hr/>

<h3 class="western"><strong>Tests et Résultat</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm">Testez l'ajout des <strong>produits
	Amazon</strong> au panier. 
	</p>
	<li><p style="margin-bottom: 0cm">Simulez des cas pour tester la
	disponibilité via l'API ou les restrictions de panier. 
	</p>
	<li><p>Vérifiez que les messages et alertes s’affichent
	correctement (par exemple : <strong>produit en rupture de stock</strong>
	via message error). 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette étape, nous avons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Utilisé un <strong>observer
	Magento</strong> pour gérer les produits Amazon ajoutés au panier.
		</p>
	<li><p style="margin-bottom: 0cm">Créé un <strong>contrôleur
	personnalisé</strong> pour gérer l’ajout des produits avec
	flexibilité. 
	</p>
	<li><p>Intégré une interaction <strong>frontend</strong>
	personnalisée via AJAX et des boutons. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__10061_2092794412"></a>
<strong>4.2. Traitement des commandes</strong></h3>
<h4 class="western"><strong>Objectifs :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Adapter le workflow des commandes
	pour gérer les <strong>produits importés d'Amazon</strong> dans
	Magento. 
	</p>
	<li><p>Configurer l'intégration avec Amazon pour l'envoi des
	données des commandes (si nécessaire, comme création ou
	synchronisation des commandes Amazon). 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Adapter le workflow des commandes pour
les produits Amazon</strong></h4>
<p style="margin-bottom: 0.37cm">Magento possède un gestionnaire
sophistiqué des commandes, mais les produits tiers, comme ceux
importés d'Amazon, peuvent nécessiter des adaptations spécifiques,
notamment :</p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>Validation ou traitement
	spécial pour les produits Amazon</strong>. 
	</p>
	<li><p><strong>Stock, disponibilité ou contraintes spécifiques à
	Amazon</strong>. 
	</p>
</ul>
<p style="margin-bottom: 0.37cm">Pour réaliser ces étapes, Magento
nous permet d'utiliser des événements, des modèles ou des
extensions pour personnaliser le gestionnaire des commandes.</p>
<hr/>

<h5 class="western"><strong>1. Créer un observer pour capturer,
valider ou personnaliser les produits Amazon avant qu'une commande
soit enregistrée</strong></h5>
<p>Un événement clé dans Magento pour capturer l’enregistrement
des commandes est <strong><code class="western">sales_model_service_quote_submit_before</code></strong>.
Cet événement se déclenche <strong>avant</strong> la conversion du
panier (<code class="western">quote</code>) en commande (<code class="western">order</code>).</p>
<h6 class="western"><strong>Configuration des événements :</strong></h6>
<ol>
	<li><p><strong>Chemin</strong> : Fichier <strong>events.xml</strong>
	: 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;config
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework/Event/etc/events.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;event </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;sales_model_service_quote_submit_before&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;observer </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;custom_amazon_order_validation&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">instance</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace\AmazonIntegration\Observer\OrderValidation&quot;
</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/event&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/config&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>2. </strong><strong>Classe
Observer (OrderValidation) : Créez le fichier
app/code/MyNamespace/AmazonIntegration/Observer/OrderValidation.php :
</strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Observer;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Event\Observer;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Event\ObserverInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Message\ManagerInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">OrderValidation
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">implements
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ObserverInterface</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$messageManager;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(ManagerInterface
$messageManager)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;messageManager = $messageManager;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">execute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(Observer
$observer)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Récupérer la commande</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$order
= $observer-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getEvent</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getOrder</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Parcourir les produits de la commande</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">foreach
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($order-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getAllItems</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
as $item) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product = $item-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getProduct</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Vérifier si c'est un produit Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')
&amp;&amp;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
              
$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getCustomAttribute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_amazon_product</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()
== </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">1</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Exemple : Valider la commande côté Amazon (simulé ici)</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(!$this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">validateOrderWithAmazon</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getSku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()))
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">throw
new </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\Magento\Framework\Exception\LocalizedException(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                       </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Le
produit Amazon &quot;%1&quot; ne peut pas être commandé pour le
moment.</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">())</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
                   );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Exemple : Valider la commande avec Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    *</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@param
string</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
$sku</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">@return
bool</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">validateOrderWithAmazon</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($sku)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Implémentez une logique pour appeler une API Amazon et valider le
SKU (ou d'autres étapes)</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Exemple temporaire simulé</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">Avant qu'une commande soit
	enregistrée, cet observer valide les produits Amazon. 
	</p>
	<li><p>Vous pouvez appeler <strong>l’API d’Amazon</strong> dans
	la fonction <code class="western">validateOrderWithAmazon()</code>
	pour vérifier la disponibilité ou d'autres règles avant
	d'autoriser la commande. 
	</p>
</ul>
<hr/>

<h5 class="western"><strong>2. Personnaliser et enrichir la commande
avec des données spécifiques Amazon</strong></h5>
<p style="margin-bottom: 0.37cm">Si vous devez <strong>ajouter des
informations spécifiques</strong> à la commande pour vos produits
Amazon (par ex. : un identifiant Amazon, une échéance, ou tout
autre champ spécifique), utilisez un <strong>observer</strong> ou un
<strong>plugin</strong> pour enrichir les données avant
enregistrement.</p>
<h6 class="western"><strong>Ajouter un champ personnalisé à la
commande :</strong></h6>
<ol>
	<li><p><strong>Créer une colonne personnalisée dans la table
	</strong><strong><code class="western">sales_order</code></strong><strong>
	pour les produits Amazon :</strong> 
	</p>
</ol>
<p>Créez un script d'installation/mise à jour via un fichier
<strong>InstallSchema.php</strong> ou <strong>db_schema.xml</strong>
dans votre module pour ajouter une colonne personnalisée, telle que
<code class="western">amazon_order_id</code> :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;schema
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework/Setup/Declaration/Schema/etc/schema.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;table </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;sales_order&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;column </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon_order_id&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:type</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;varchar&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">length</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;255&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">comment</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Amazon
Order ID&quot; </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/table&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/schema&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Regénérez la base de
données :</strong></p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
setup:upgrade</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>2. </strong><strong>Assigner
un identifiant spécifique à la commande pour les produits Amazon : </strong>
</p>
<p>Modifiez votre <strong>observer</strong> ou créez-en un nouveau à
l'événement <strong><code class="western">sales_model_service_quote_submit_success</code></strong>
pour affecter l'identifiant d'Amazon à la commande :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$order-&gt;setData('amazon_order_id',
$this-&gt;getAmazonOrderId($order));</span></span></font></font></font></strong><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$order-&gt;save();</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.
Envoyer les commandes Magento vers Amazon</strong></h4>
<p style="margin-bottom: 0.37cm">Si vous souhaitez synchroniser les
commandes effectuées sur Magento avec Amazon (ou d’autres
systèmes), procédez comme suit :</p>
<h5 class="western"><strong>1. Ajouter un service API pour créer une
commande sur Amazon</strong></h5>
<p style="margin-bottom: 0.37cm">Implémentez la logique pour appeler
l'API Amazon et transférer les détails de la commande. Une méthode
typique pourrait inclure les étapes suivantes :</p>
<ul>
	<li><p style="margin-bottom: 0cm">Créer une <strong>structure JSON</strong>
	ou XML contenant les informations de commande nécessaires. 
	</p>
	<li><p>Utiliser une requête HTTP (via Guzzle ou cURL) pour envoyer
	ces données vers l'API Amazon. 
	</p>
</ul>
<p>Exemple :</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
function sendOrderToAmazon($order)</span></span></font></font></font></strong><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $client = new \GuzzleHttp\Client();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $endpoint = 'https://api.amazon.com/create_order';</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $payload = [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       'order_id' =&gt; $order-&gt;getIncrementId(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       'products' =&gt; [],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   foreach ($order-&gt;getAllItems() as $item) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $payload['products'][] = [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           'sku' =&gt; $item-&gt;getSku(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           'name' =&gt; $item-&gt;getName(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           'quantity' =&gt; $item-&gt;getQtyOrdered(),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   try {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $response = $client-&gt;post($endpoint, [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           'headers' =&gt; ['Authorization' =&gt; 'Bearer
YOUR_API_TOKEN'],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           'json' =&gt; $payload</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $data = json_decode($response-&gt;getBody(), true);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       return $data['amazon_order_id'] ?? null;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   } catch (\Exception $e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       throw new \Magento\Framework\Exception\LocalizedException(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           __('Une erreur est survenue lors de l’envoi de la
commande à Amazon : %1', $e-&gt;getMessage())</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>2.
Ajouter des informations renvoyées par Amazon à la commande</strong></h5>
<p style="margin-bottom: 0.37cm">Vous pouvez sauvegarder l'ID de la
commande renvoyé par Amazon ou tout autre état lié à Amazon dans
votre tableau personnalisé, comme montré dans la section
précédente.</p>
<hr/>

<h4 class="western"><strong>Validation et Tests</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Tester les étapes de
	validation :</strong> 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Simulez différents scénarios,
		comme un produit indisponible dans Amazon. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Tester l'intégration avec
	l'API Amazon :</strong> 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Vérifiez si les commandes sont
		correctement transférées vers Amazon et si les réponses (comme
		<code class="western">amazon_order_id</code>) sont gérées. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Tester les erreurs en
	backend/frontend :</strong> 
	</p>
	<ul>
		<li><p>Assurez-vous que les restrictions liées aux produits Amazon
		sont correctement affichées (comme des messages d’annulation de
		commande, erreurs si indisponible, etc.). 
		</p>
	</ul>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette étape, nous avons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Adapté le workflow de gestion des
	commandes pour inclure des validations spécifiques aux produits
	Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Ajouté la possibilité de
	synchroniser les commandes entre Magento et Amazon via une API. 
	</p>
	<li><p>Configuré l'enrichissement des données de commande (comme
	l'ajout d’un champ pour stocker un identifiant <code class="western">amazon_order_id</code>).
		</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><a name="__DdeLink__10843_2092794412"></a>
<strong>4.3. Synchronisation des produits avec l’API Amazon</strong></h3>
<h4 class="western"><strong>Objectifs :</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm">Planifier l'import des données
	produits depuis Amazon via les <strong>Cron Jobs natifs de Magento</strong>.
		</p>
	<li><p>Configurer un script pour interagir avec l'<strong>API Amazon</strong>
	et synchroniser les données (comme les stocks, descriptions ou
	nouveaux produits). 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées</strong></h3>
<hr/>

<h4 class="western"><strong>A. Utiliser les Cron Jobs natifs de
Magento pour planifier l’import</strong></h4>
<p style="margin-bottom: 0.37cm">Magento utilise XML pour définir
les tâches cron. Ces configurations s’exécutent en arrière-plan
selon un planning défini sur le serveur. Voici les étapes
principales :</p>
<hr/>

<h5 class="western"><strong>1. Créer le fichier </strong><strong><code class="western">cron.xml</code></strong></h5>
<p style="margin-bottom: 0.37cm">Pour définir votre tâche de
synchronisation des produits Amazon, créez un fichier <strong>cron.xml</strong>
dans votre module.</p>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Chemin
	:</strong><br/>
<strong>app/code/MyNamespace/AmazonIntegration/etc/cron.xml</strong></p>
	<li><p><strong>Contenu :</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xml
version</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1.0&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">?&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;config
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:framework/Event/etc/cron.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;group </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">id</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;default&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Tâche Cron : Synchroniser les produits Amazon --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;job
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;amazon_products_sync&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">instance</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;MyNamespace\AmazonIntegration\Cron\ProductSync&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">method</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;execute&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;schedule&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*
*/6 * * *</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/schedule&gt;
</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Exécution toutes les 6 heures --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/job&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/group&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/config&gt;</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">&lt;job&gt;</code></strong>
	: Définit notre tâche cron. 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong><code class="western">name</code></strong>
		: Identifiant unique de la tâche (ex. : <code class="western">amazon_products_sync</code>).
				</p>
		<li><p style="margin-bottom: 0cm"><strong><code class="western">instance</code></strong>
		: Classe qui sera appelée pour exécuter l'import. 
		</p>
		<li><p style="margin-bottom: 0cm"><strong><code class="western">method</code></strong>
		: Méthode spécifique de la classe appelée (ex. : <code class="western">execute</code>).
				</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">&lt;schedule&gt;</code></strong>
	: Définit la fréquence d’exécution de la tâche cron. 
	</p>
	<ul>
		<li><p>En exemple : Toutes les 6 heures (<code class="western">*
		*/6 * * *</code>). 
		</p>
	</ul>
</ul>
<p style="margin-bottom: 0.37cm"><strong>Exemple de fréquences
courantes :</strong> | Fréquence | Schedule Syntax |
|-----------------------------|--------------------------| | Toutes
les heures | <code class="western">0 * * * *</code> | | Toutes les 6
heures | <code class="western">* */6 * * *</code> | | Tous les jours
à minuit | <code class="western">0 0 * * *</code> | | Tous les
dimanches à 2h | <code class="western">0 2 * * 0</code> |</p>
<hr/>

<h5 class="western"><strong>2. Implémenter la classe Cron</strong></h5>
<p style="margin-bottom: 0.37cm">Créez une classe qui contiendra la
logique pour synchroniser les données produits avec Amazon. Ce sera
la classe utilisée dans le fichier <code class="western">cron.xml</code>.</p>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Chemin
	:</strong><br/>
<strong>app/code/MyNamespace/AmazonIntegration/Cron/ProductSync.php</strong></p>
	<li><p><strong>Contenu :</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Cron;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Psr\Log\LoggerInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Helper\AmazonApi;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductSync</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$logger;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$amazonApi;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       LoggerInterface $logger,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       AmazonApi $amazonApi</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;logger = $logger;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;amazonApi = $amazonApi;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Méthode appelée par le cron job</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">execute</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">try
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Appel à l'import des données depuis Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$importedProducts
= $this-&gt;amazonApi-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">syncProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Log des résultats</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">info</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(sprintf(&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Synchronisation
des produits Amazon : %d produits importés.</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,
count($importedProducts)));</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       } </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">catch
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Exception
$e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Gestion des erreurs</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;logger-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">error</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(sprintf(&quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Erreur
lors de la synchronisation des produits Amazon : %s</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;,
$e-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getMessage</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()));</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">Le fichier utilisera un <strong>helper</strong>
	dédié (e.g., <code class="western">AmazonApi</code>) pour
	effectuer la synchronisation réelle. 
	</p>
	<li><p style="margin-bottom: 0cm">Les journaux des actions sont
	enregistrés via le <strong>LoggerInterface</strong> : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Success : Produit importé. 
		</p>
		<li><p>Échec : Message d’erreur détaillé. 
		</p>
	</ul>
</ul>
<hr/>

<h5 class="western"><strong>3. Configurer le cron du serveur :</strong></h5>
<p>Magento génère ses tâches cron dans la table <code class="western">cron_schedule</code>.
Assurez-vous que votre serveur/instance autorise l’exécution des
tâches planifiées.</p>
<ol>
	<li><p><strong>Configurer Magento pour gérer les tâches
	chronométrées :</strong> Ajoutez dans le crontab système : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*
* * * /usr/bin/php /path/to/magento/bin/magento cron:run | </span></span></font></font></font><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">grep
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">-v
</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&quot;Ran
jobs by schedule&quot; </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;&gt;
/var/log/magento.cron.log</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Vérifiez que les tâches
sont listées dans Magento via la commande suivante : </strong>
</p>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cron:install</span></span></font></font></font><br/>
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
cron:run</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>B.
Script pour synchroniser les produits via l’API Amazon</strong></h4>
<p style="margin-bottom: 0.37cm">Le cœur de la synchronisation
réside dans cette étape : appeler l’API Amazon pour importer les
produits et les mettre à jour.</p>
<h5 class="western"><strong>1. Ajouter une classe Helper pour Amazon
API</strong></h5>
<p style="margin-bottom: 0.37cm">Créez un helper contenant la
logique pour appeler l’API d’Amazon et effectuer des mises à
jour :</p>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Chemin
	:</strong><br/>
<strong>app/code/MyNamespace/AmazonIntegration/Helper/AmazonApi.php</strong></p>
	<li><p><strong>Contenu :</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Helper;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">GuzzleHttp\Client;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\ProductRepositoryInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Model\ProductFactory;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AmazonApi</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$httpClient;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productFactory;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Client $httpClient,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductRepositoryInterface $productRepository,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ProductFactory $productFactory</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;httpClient = $httpClient;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productRepository = $productRepository;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productFactory = $productFactory;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Synchroniser les produits avec l'API Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">syncProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $apiEndpoint = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">https://api.amazon.com/products</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $apiKey = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">YOUR_API_KEY</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Appel API pour récupérer les produits</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$response
= $this-&gt;httpClient-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">get</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($apiEndpoint,
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">headers</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Authorization</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Bearer
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$apiKey&quot;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ]</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $products = json_decode($response-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getBody</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(),
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $importedProducts = [];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">foreach
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($products
as $productData) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Récupérer ou créer le produit dans Magento</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product
= $this-&gt;productRepository-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">get</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'],
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">false</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">null</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
?? $this-&gt;productFactory-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">create</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Mettre à jour les données</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setSku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setPrice</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setDescription</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">description</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setStockData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">([</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">qty</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">is_in_stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; $productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
&gt; </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">0</span></i></font></font></font><br/>
<font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">
           </span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Sauvegarde dans la base Magento</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">save</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $importedProducts[] = $product-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getId</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$importedProducts;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="margin-bottom: 0.37cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>GuzzleHttp\Client</strong>
	: Utilisé pour gérer les appels HTTP vers l’API Amazon. 
	</p>
	<li><p>Les données des produits sont récupérées, puis mises à
	jour ou créées dans Magento en utilisant les classes natives
	(<code class="western">ProductRepository</code>, <code class="western">ProductFactory</code>).
		</p>
</ul>
<hr/>

<h5 class="western"><strong>2. Tester la synchronisation</strong></h5>
<p>Avant d’exécuter votre cron, vous pouvez tester manuellement la
synchronisation avec une commande Magento CLI personnalisée
(facultatif).</p>
<ol>
	<li><p style="margin-bottom: 0cm">Créez une commande CLI (fichier
	<strong>etc/di.xml</strong> et dossier <strong>Console/Command</strong>).
		</p>
	<li><p>Testez l'exécution avec : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">php
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">bin/magento
amazon:sync-products</span></span></font></font></font></p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>Validation
et Résultats</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Vérifiez la planification
	du cron dans Magento :</strong><br/>
Table <code class="western">cron_schedule</code>
	ou <strong>Stores &gt; Configuration &gt; Advanced &gt; Cron
	Schedule</strong>. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Assurez-vous que les
	journaux sont corrects :</strong><br/>
Fichier : <strong>var/log/*.log</strong>
		</p>
	<li><p><strong>Confirmez que les produits sont synchronisés
	correctement dans Magento :</strong><br/>
Allez dans <strong>Catalog
	&gt; Products</strong>. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette section, nous avons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Configuré un fichier <strong>cron.xml</strong>
	pour planifier la synchronisation avec Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Créé une classe Cron et un
	helper pour gérer la logique de synchronisation. 
	</p>
	<li><p>Défini un script pour intégrer et mettre à jour les
	données produits via l'<strong>API Amazon</strong>. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0.37cm"><br/>
<br/>

</p>
<ul>
	<li><p style="margin-bottom: 0.37cm"><strong>Livrables du Jour 4 :</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm">Fonctionnalité de panier active.
				</p>
		<li><p>Gestion des produits synchronisée avec l’API Amazon. 
		</p>
	</ul>
</ul>
<hr/>

<h3 class="western"><br/>
<br/>

</h3>
<p><br/>
<br/>

</p>
<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western"><br/>
<br/>

</h3>
<p style="page-break-before: always"><br/>
<br/>

</p>
<h3 class="western"><a name="__DdeLink__11757_2092794412"></a><strong>Jour
5 : Tests, performance et maintenance</strong></h3>
<h4 class="western">Objectif : Finaliser le projet en garantissant sa
robustesse, ses performances et ses standards.</h4>
<p style="margin-bottom: 0.37cm"><a name="__DdeLink__11761_2092794412"></a>
<br/>
<br/>

</p>
<h2 class="western" style="margin-top: 0cm; margin-bottom: 0.37cm"><strong>5.1.
Tests et Validation</strong></h2>
<h3 class="western"><strong>Objectifs :</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm">Mettre en place des <strong>tests
	fonctionnels</strong> avec le <strong>Magento Functional Testing
	Framework (MFTF)</strong> pour valider le workflow :<br/>
<strong>ajout
	produit → panier → commande</strong>. 
	</p>
	<li><p>Ajouter des <strong>tests unitaires</strong> pour assurer la
	fiabilité du module d'importation des produits. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Tests fonctionnels avec Magento
Functional Testing Framework (MFTF)</strong></h4>
<p style="margin-bottom: 0.37cm">Le <strong>MFTF</strong> est l'outil
natif de Magento pour exécuter des tests fonctionnels. Il permet
d'automatiser les vérifications du workflow Magento sur des
scénarios complexes.</p>
<h5 class="western"><strong>1. Installer et configurer le MFTF</strong></h5>
<p style="margin-bottom: 0.37cm"><strong>Pré-requis :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">Assurez-vous que Magento est
	installé en mode développeur. 
	</p>
	<li><p>PHP et Composer doivent être correctement configurés. 
	</p>
</ul>
<p><strong>Étapes d'installation :</strong></p>
<ol>
	<li><p>Accédez au répertoire de Magento et installez les
	dépendances MFTF :</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0.37cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">composer
</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">require
magento/magento2-functional-testing-framework</span></span></font></font></font></p>
<ol start="2">
	<li><p> Une fois installé, générez la configuration initiale de
	MFTF : 
	</p>
	<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
	<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">vendor/bin/mftf
	</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">generate:tests</span></span></font></font></font></p>
	<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
	</p>
	<li><p>Configuration du fichier <strong>env</strong> de test : 
	</p>
</ol>
<ol start="3">
	<ul>
		<li><p>Le fichier <strong>dev/tests/acceptance/.env</strong> doit
		contenir vos paramètres tests (base URL, informations admin…).
		Exemple simple : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MAGENTO_BASE_URL=&quot;http://magento.local&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MAGENTO_BACKEND_NAME=&quot;admin&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MAGENTO_ADMIN_USERNAME=&quot;admin&quot;</span></span></font></font></font><br/>
<font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MAGENTO_ADMIN_PASSWORD=&quot;admin123&quot;</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<ol start="4">
	<li><p>Lancez un test basé sur les tests existants pour valider la
	configuration MFTF : 
	</p>
</ol>
<p><br/>
<br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">vendor/bin/mftf
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">run:tests
--tests AdminLoginTest</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western"><strong>2. Créer un test MFTF pour le workflow
(produit → panier → commande)</strong></h5>
<p style="margin-bottom: 0.37cm">Un scénario typique pour le
workflow pourrait inclure les étapes :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Accéder à un produit sur le site
	(catalogue détaillé ou importé d'Amazon). 
	</p>
	<li><p style="margin-bottom: 0cm">Ajouter ce produit au panier. 
	</p>
	<li><p style="margin-bottom: 0cm">Valider le panier et passer
	commande. 
	</p>
	<li><p>Vérifier la commande dans le système admin Magento. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm"><strong>Structure de fichier MFTF :</strong></p>
<ul>
	<li><p>Les tests MFTF utilisent des fichiers XML pour définir les
	scénarios, basés sur des pages et actions pré-définies. 
	</p>
</ul>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Chemin des fichiers
	:</strong><br/>
<strong>dev/tests/acceptance/tests/functional/MFTFTest.xml</strong></p>
	<li><p><strong>Exemple de test : Produit → Panier → Commande</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;tests
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xmlns:</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">xsi</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">:noNamespaceSchemaLocation</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;urn:magento:mftf:Test/1.0/testCase.xsd&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;test </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;ProductToCartToOrderTest&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;labels&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;label&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">ProductWorkflow</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/label&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/labels&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;preconditions&gt; </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Conditions préalables --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;createData
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">items</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;product&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               &lt;data </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">entity</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;simpleProduct&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stepKey</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;simpleProductData&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;/createData&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/preconditions&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;steps&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Étape 1 : Aller sur la page du produit --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;amOnPage
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">url</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;{{simpleProductData.url_key}}&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Étape 2 : Ajouter au panier --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;click
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#product-addtocart-button&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;waitForPageLoad/&gt;</span></span></font></font></font><br/>
<br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Étape 3 : Aller au panier --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;amOnPage
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">url</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;/checkout/cart&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;assertElementContains </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;.subtotal
.price&quot; </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stepKey</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;validateSubtotal&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Étape 4 : Passer la commande --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;click
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;[data-role='proceed-to-checkout']&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;waitForPageLoad/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;fillField </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#shipping-firstname&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stepKey</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;shippingFirstName&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">value</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Jane&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;fillField </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#shipping-lastname&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stepKey</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;shippingLastName&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">value</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;Doe&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;fillField </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#shipping-email&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stepKey</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;shippingEmail&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">value</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;jane.doe@example.com&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;fillField </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#shipping-telephone&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stepKey</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;shippingTelephone&quot;
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">value</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;1234567890&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;click </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#shipping-method-button&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;waitForPageLoad/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           &lt;click </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">selector</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=&quot;#place-order-button&quot;</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">/&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/steps&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;tearDown&gt; </span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;!--
Nettoyage après le test --&gt;</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;removeData&gt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">simpleProductData</span></span></font></font></font><font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/removeData&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       &lt;/tearDown&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   &lt;/test&gt;</span></span></font></font></font><br/>
<font color="#d5b778"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;/tests&gt;</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>Conditions préalables
	(preconditions)</strong> : Déclare un produit simple pour effectuer
	les tests. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Étapes (steps)</strong> :
	Définissent les actions du test fonctionnel. 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>amOnPage</strong> :
		Navigue sur une URL. 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>click</strong> : Clique
		sur un élément. 
		</p>
		<li><p style="margin-bottom: 0cm"><strong>fillField</strong> :
		Remplit un champ de formulaire. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Vérifications
	(assertions)</strong> : 
	</p>
	<ul>
		<li><p><strong>assertElementContains</strong> : Vérifie si un
		élément contient une valeur donnée (prix, nom…). 
		</p>
	</ul>
</ul>
<ol start="3">
	<li><p><strong>Exécuter le test créé :</strong> 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">vendor/bin/mftf
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">run:tests
--tests ProductToCartToOrderTest</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h4 class="western"><strong>B. Tests unitaires sur le module
d’importation</strong></h4>
<p style="margin-bottom: 0.37cm">Les tests unitaires garantissent la
robustesse de votre logique métier, notamment pour votre <strong>module
d'importation de produits Amazon</strong>.</p>
<h5 class="western"><strong>1. Configuration initiale pour PHPUnit</strong></h5>
<p>Magento utilise PHPUnit pour exécuter les tests unitaires. Si ce
n’est pas encore configuré :</p>
<ol>
	<li><p>Installez PHPUnit via Composer : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">composer
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">require
--dev phpunit/phpunit ^9.5</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<ol start="2">
	<li><p>Exécutez les tests existants pour vérifier la configuration
	: 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">./vendor/bin/phpunit
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">-c
dev/tests/unit/phpunit.xml.dist</span></span></font></font></font></p>
<h5 class="western"><strong>2. Tester une méthode - Exemple :
Validation d’un produit importé</strong></h5>
<p style="margin-bottom: 0.37cm">Créez un test unitaire pour la
méthode utilisée dans le helper d'importation (par exemple,
<code class="western">syncProducts()</code>).</p>
<ol>
	<li><p style="margin-bottom: 0.37cm"><strong>Structure des fichiers
	liés au test :</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm">Fichier testé :
		<strong>app/code/MyNamespace/AmazonIntegration/Helper/AmazonApi.php</strong>
				</p>
		<li><p style="margin-bottom: 0cm">Fichier de test unitaire :
		<strong>app/code/MyNamespace/AmazonIntegration/Test/Unit/Helper/AmazonApiTest.php</strong>
				</p>
		<li><p style="margin-bottom: 0cm"></p>
	</ul>
	<li><p><strong>Exemple de test unitaire :</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font></strong><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Test\Unit\Helper;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">PHPUnit\Framework\TestCase;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Helper\AmazonApi;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Api\ProductRepositoryInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Catalog\Model\ProductFactory;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">GuzzleHttp\Client;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AmazonApiTest
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">extends
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">TestCase</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$amazonApi;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productRepositoryMock;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productFactoryMock;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$httpClientMock;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">protected
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">setUp</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">():
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">void</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Mocks des dépendances</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;productRepositoryMock
= $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">createMock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(ProductRepositoryInterface::</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;productFactoryMock =
$this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">createMock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(ProductFactory::</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;httpClientMock = $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">createMock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(Client::</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Classe AmazonApi</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;amazonApi
= </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">new
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AmazonApi(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;httpClientMock,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;productRepositoryMock,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $this-&gt;productFactoryMock</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">testSyncProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Mock de la réponse API</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$response
= [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">test-product-1</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Test
Product 1</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">10</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">5</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       ];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;httpClientMock</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           -&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">method</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">get</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">')</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           -&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">willReturn</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">new
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\GuzzleHttp\Psr7\Response(</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">200</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">,
[], json_encode($response)));</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Tester la méthode</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$result
= $this-&gt;amazonApi-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">syncProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">assertIsArray</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($result);
//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Vérifiez si un tableau est renvoyé</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<ol start="3">
	<li><p><strong>Exécuter le test unitaire : </strong>
	</p>
	<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
	<strong><font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">./vendor/bin/phpunit
	</span></span></font></font></font></strong><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">--filter
	AmazonApiTest</span></span></font></font></font></p>
	<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
	</p>
</ol>
<ol>
	<p style="margin-bottom: 0cm"></p>
</ol>
<p style="margin-bottom: 0cm">Validation et résultat</p>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Tests fonctionnels (MFTF)</strong>
	: Vérifiez que le workflow produit &gt; panier &gt; commande
	s'exécute correctement. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Tests unitaires</strong> :
		</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Confirmez que le module
		d'importation gère les scénarios. 
		</p>
		<li><p>Vérifiez les erreurs et exceptions pour vos dépendances
		simulées dans PHPUnit. 
		</p>
	</ul>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Pendant cette étape, nous avons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Implémenté un test fonctionnel
	<strong>produit &gt; panier &gt; commande</strong> avec MFTF. 
	</p>
	<li><p>Créé des tests unitaires pour la synchronisation des
	produits avec Amazon en testant la couche métier. 
	</p>
</ol>
<ol start="4">
	<li><p></p>
</ol>
<p><br/>
<br/>

</p>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
<ul>
	<li><p style="margin-bottom: 0.37cm"><a name="__DdeLink__12603_2092794412"></a>
	<strong>5.2. Optimisation :</strong></p>
</ul>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>Objectifs
:</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm">Mettre en place une <strong>mise
	en cache des données récupérées depuis l’API Amazon</strong>,
	notamment pour éviter les appels répétitifs et accélérer
	l’affichage en front. 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Utilisation des <strong>Cache
		Tags Magento</strong>. 
		</p>
	</ul>
	<li><p>Activer et tester le <strong>Full Page Cache (FPC)</strong>
	avec <strong>Varnish</strong> pour optimiser les performances de la
	boutique en ligne. 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Mise en cache des données récupérées
depuis l’API Amazon</strong></h4>
<p style="margin-bottom: 0.37cm">Étant donné que l’API Amazon
peut être lente (ou limitée en fréquence d’appels), il est
essentiel de mettre en cache les données (produits, stocks ou autre)
une fois qu'elles sont récupérées. Magento propose un système de
cache robuste avec <strong>tags</strong> qui permet de gérer les
données efficacement.</p>
<hr/>

<h5 class="western"><strong>1. Créer un cache personnalisé avec
Magento</strong></h5>
<p>Créez une classe helper pour mettre en œuvre la logique de mise
en cache lors de la récupération des données depuis l’API.</p>
<ol>
	<li><p><strong>Fichier Helper : Cache et API (AmazonApi.php)</strong><br/>
<strong>Chemin
	:</strong>
	<code class="western">app/code/MyNamespace/AmazonIntegration/Helper/AmazonApi.php</code><br/>
Ajout/modification
	des fonctionnalités de cache. 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Helper;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">GuzzleHttp\Client;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\App\CacheInterface;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\App\Cache\Type\Config
</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">as
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">CacheTypeConfig;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">AmazonApi</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
const </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CACHE_TAG
</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon_products_cache</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
const </span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CACHE_LIFETIME
</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">=
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">3600</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">;
//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
1 heure</span></span></font></font></font><br/>
<br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$httpClient;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$cache;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Client $httpClient,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       CacheInterface $cache</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;httpClient = $httpClient;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;cache = $cache;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Méthode principale pour synchroniser les produits avec
Amazon.</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">syncProducts</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Vérifier le cache d'abord</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$cacheKey
= </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">self</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CACHE_TAG
</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">.
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">_products</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $cachedData = $this-&gt;cache-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">load</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($cacheKey);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($cachedData)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">json_decode($cachedData,
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);
//</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Retourne les données en cache</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Si pas de données en cache, appeler l'API Amazon</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$apiEndpoint
= '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">https://api.amazon.com/products</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $apiKey = '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">YOUR_API_KEY</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">';</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">try
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $response = $this-&gt;httpClient-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">get</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($apiEndpoint,
[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">headers</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; ['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Authorization</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; &quot;</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Bearer
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$apiKey&quot;]</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           ]);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           $products = json_decode($response-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getBody</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(),
</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">true</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Mettre les données en cache</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;cache-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">save</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               json_encode($products),</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               $cacheKey,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               [</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">self</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CACHE_TAG</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">self</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CACHE_LIFETIME</span></i></font></font></font><br/>
<font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">
           </span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$products;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       } </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">catch
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(\Exception
$e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">throw
new </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">\Magento\Framework\Exception\LocalizedException(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
               </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Erreur
lors de la récupération des produits Amazon : %1</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
$e-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getMessage</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">())</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
           );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Invalider le cache des produits Amazon.</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">invalidateCache</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;cache-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">remove</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">self</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">CACHE_TAG
</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">.
'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">_products</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>CacheInterface</strong> :
	Interagit avec le système de cache natif de Magento. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Tags</strong> : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><code class="western">CACHE_TAG</code>
		permet d’identifier les données mises en cache dans le système
		Magento. 
		</p>
		<li><p style="margin-bottom: 0cm">Les tags facilitent
		l'invalidation ou le nettoyage ciblé. 
		</p>
	</ul>
	<li><p><strong>Durée de vie (</strong><strong><code class="western">CACHE_LIFETIME</code></strong><strong>)</strong>
	: Définit combien de temps les données sont conservées en cache
	avant d’être considérées comme obsolètes. 
	</p>
</ul>
<hr/>

<h5 class="western"><strong>2. Forcer l'invalidation lors de la mise
à jour/synchronisation</strong></h5>
<p style="margin-bottom: 0.37cm">Si les données changent (par ex.,
lors de la synchronisation des produits), appelez la méthode
<code class="western">invalidateCache</code> dans votre module pour
effacer les données obsolètes.</p>
<p>Exemple :</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$amazonApi
= $this-&gt;helper-&gt;getAmazonApiHelper();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$amazonApi-&gt;invalidateCache();
// Supprime les anciens produits mis en cache</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$products
= $amazonApi-&gt;syncProducts(); // Synchronise et recharge les
nouveaux</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>3.
Vérifiez l’efficacité du cache</strong></h5>
<ol>
	<li><p style="margin-bottom: 0.37cm">Allez dans le répertoire
	<strong>Magento Backend</strong> :<br/>
<strong>System &gt; Tools &gt;
	Cache Management</strong>.<br/>
Assurez-vous que le cache est activé
	pour les sections importantes (e.g., <strong>Config</strong>).</p>
	<li><p style="margin-bottom: 0.37cm">Testez votre mise en cache :</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Appelez une synchronisation
		initiale des produits (via cron ou commande). 
		</p>
		<li><p>Vérifiez qu'une deuxième exécution rapide utilise les
		données mises en cache (contrôlez les temps, les logs ou les
		réponses). 
		</p>
	</ul>
</ol>
<hr/>

<h4 class="western"><strong>B. Activation et test du Full Page Cache
(FPC) avec Varnish</strong></h4>
<p style="margin-bottom: 0.37cm">Magento offre un support natif pour
<strong>Varnish</strong> afin d'optimiser les performances frontales
grâce au Full Page Cache. Cette méthode est cruciale pour les sites
à fort trafic.</p>
<hr/>

<h5 class="western"><strong>1. Installer Varnish sur votre serveur</strong></h5>
<p><strong>Étapes d’installation :</strong></p>
<ol>
	<li><p>Installez Varnish (exemple pour Ubuntu) : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sudo
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">apt
update</span></span></font></font></font><br/>
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sudo
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">apt
install varnish</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm">Configurez <strong>Varnish</strong>
pour écouter le port <strong>80</strong> (au lieu de Nginx ou
Apache). 
</p>
<ol start="2">
	<ul>
		<li><p style="margin-bottom: 0cm">Fichier :
		<code class="western">/etc/varnish/default.vcl</code>. 
		</p>
		<li><p>Exemple de configuration <strong>backend</strong> : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">backend
default {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .host = &quot;127.0.0.1&quot;; # Adresse de votre serveur web</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   .port = &quot;8080&quot;; # Port du serveur d'application (Magento
via apache/nginx)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm">Redémarrez <strong>Varnish</strong>
pour appliquer les configs : 
</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sudo
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">systemctl
restart varnish</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<hr/>

<p style="margin-bottom: 0cm"><br/>

</p>
<h5 class="western"><strong>2. Configurer Magento pour utiliser
Varnish</strong></h5>
<p style="margin-bottom: 0.37cm">Magento propose une configuration
prête à l'emploi pour Varnish.</p>
<ol>
	<li><p style="margin-bottom: 0.37cm">Allez dans le panneau
	d’administration Magento :</p>
</ol>
<p style="margin-bottom: 0cm"><strong>Stores &gt; Configuration &gt;
Advanced &gt; System &gt; Full Page Cache</strong>. 
</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-left: 1.25cm; margin-bottom: 0cm">2. <strong>
</strong><strong>Configurer les réglages FPC</strong> :</p>
<ol>
	<ul>
		<li><p style="margin-bottom: 0cm"><strong>Application Cache :</strong>
		Choisissez <code class="western">Varnish Cache</code>. 
		</p>
		<li><p style="margin-bottom: 0cm">Exportez les configurations
		(<code class="western">.vcl</code>) adaptées à votre
		environnement : 
		</p>
		<ul>
			<li><p style="margin-bottom: 0cm">Cliquez sur <strong>Export VCL
			for Varnish 6</strong>. 
			</p>
		</ul>
		<li><p style="margin-bottom: 0cm">Remplacez le fichier
		<code class="western">/etc/varnish/default.vcl</code> par celui
		généré. 
		</p>
	</ul>
</ol>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<ol>
	<p><strong>3. </strong><strong>Vérifiez les permissions et
	redémarrez Varnish :</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sudo
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">varnishd
-C -f /etc/varnish/default.vcl</span></span></font></font></font><br/>
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sudo
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">systemctl
restart varnish</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>3.
Tester le Full Page Cache</strong></h5>
<p>Après l’intégration, testez les performances pour vous assurer
que Varnish est effectivement actif.</p>
<ol>
	<li><p><strong>Vérifiez les headers HTTP :</strong> Utilisez un
	outil comme <strong>cURL</strong> ou les outils DevTools du
	navigateur (onglet Réseau). Exemple avec cURL : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">curl
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">-I
http://magento.local/</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm">Regardez la ligne <code class="western">X-Magento-Cache-Debug</code>
:</p>
<ul>
	<li><p style="margin-bottom: 0cm"><code class="western">HIT</code>:
	La page est servie depuis le cache. 
	</p>
	<li><p><code class="western">MISS</code>: La page n’a pas encore
	été mise en cache. 
	</p>
</ul>
<ol start="2">
	<li><p style="margin-bottom: 0cm"><strong>Chargez plusieurs pages</strong>
	pour confirmer que : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Les premières requêtes chargent
		la page et créent le cache (MISS). 
		</p>
		<li><p>Les requêtes subséquentes utilisent le cache (HIT). 
		</p>
	</ul>
</ol>
<hr/>

<h5 class="western"><strong>4. Résolutions de problèmes</strong></h5>
<ul>
	<li><p style="margin-bottom: 0cm"><strong>Problème avec les
	sessions/admin non mises en cache :</strong> Configurez un
	contournement pour ignorer le cache Varnish : 
	</p>
	<ul>
		<li><p>Ajoutez une règle dans votre fichier <code class="western">.vcl</code>
		pour exclure les sessions : 
		</p>
	</ul>
</ul>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
(req.url ~ &quot;^/admin&quot;) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   return (pass);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
(req.http.cookie ~ &quot;PHPSESSID&quot;) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   return (pass);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Performances non améliorées :</strong>
Vérifiez les logs Varnish via : 
</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">varnishlog</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>Validation
et Résultats</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Validation du cache Amazon
	:</strong> 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Vérifiez que les données sont
		mises en cache et invalidez-les correctement lorsque les appels
		vers l’API changent. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Full Page Cache &amp;
	Varnish :</strong> 
	</p>
	<ul>
		<li><p>Confirmez que <strong>Varnish</strong> est actif via les
		en-têtes HTTP et évaluez les gains de performance à l'aide de
		tests de charge (e.g., JMeter). 
		</p>
	</ul>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette section, vous avez appris
à :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Utiliser les <strong>Cache Tags
	Magento</strong> pour optimiser les appels à l’API Amazon. 
	</p>
	<li><p>Activer et configurer le <strong>Full Page Cache avec Varnish</strong>
	pour améliorer les vitesses de chargement en front. 
	</p>
</ol>
<p>Ce processus assure une meilleure gestion des ressources et des
temps de réponse optimaux pour vos utilisateurs.</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<ul>
	<li><p style="margin-bottom: 0.37cm"><a name="__DdeLink__13279_2092794412"></a>
	<strong>5.3. Sécurité :</strong></p>
</ul>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>Objectifs
:</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Protéger les clés API</strong>
	en les stockant en toute sécurité dans le fichier <strong><code class="western">env.php</code></strong>,
	afin d’éviter leur exposition. 
	</p>
	<li><p><strong>Valider les données issues de l'API Amazon</strong>
	avant de les insérer dans Magento, pour éviter les failles de
	sécurité (injections SQL, données malformées, etc.). 
	</p>
</ol>
<hr/>

<h3 class="western"><strong>Étapes détaillées :</strong></h3>
<hr/>

<h4 class="western"><strong>A. Stockage des clés API en toute
sécurité dans </strong><strong><code class="western">env.php</code></strong></h4>
<p style="margin-bottom: 0.37cm">Les clés sensibles (comme celles de
l’API Amazon) ne doivent <strong>jamais</strong> être codées en
dur dans un fichier source. Magento recommande de les stocker dans le
fichier <strong>env.php</strong>, qui est destiné à contenir des
configurations sensibles tout en étant protégé des accès publics.</p>
<hr/>

<h5 class="western"><strong>1. Ajouter les clés API dans le fichier
</strong><strong><code class="western">env.php</code></strong></h5>
<p>Le fichier <code class="western">env.php</code> se trouve dans le
répertoire <strong><code class="western">app/etc/</code></strong>.</p>
<ol>
	<li><p>Ouvrez le fichier <strong><code class="western">app/etc/env.php</code></strong>
	: 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">[</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">backend</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">frontName</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">admin</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">crypt</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">key</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">your_encryption_key</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">db</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; [</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
données de connexion à la base de données</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Ajout de vos propres variables ici</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">api_keys</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; [ //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Nouvelle section pour stocker les clés API</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">amazon</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">YOUR_AMAZON_API_KEY</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">another_api_key</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'
=&gt; '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">YOUR_OTHER_API_KEY</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">'</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ]</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">];</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm">Définissez vos clés API Amazon (ou
autres services) sous une nouvelle section <strong><code class="western">api_keys</code></strong>.
</p>
<hr/>

<h5 class="western"><strong>2. Accéder aux clés depuis le code</strong></h5>
<ol>
	<li><p style="margin-bottom: 0.37cm">Utilisez la classe Magento
	<strong><code class="western">ConfigInterface</code></strong> pour
	accéder aux clés dans les fichiers sources de votre module :</p>
	<p><strong>Exemple : Lecture de la clé API Amazon dans un Helper</strong></p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Helper;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\App\Config\ScopeConfigInterface;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Config</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">protected
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$scopeConfig;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(ScopeConfigInterface
$scopeConfig)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;scopeConfig = $scopeConfig;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getAmazonApiKey</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">()</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Extraire la clé API depuis env.php</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$apiKey
= $this-&gt;scopeConfig-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">getValue</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">('</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">api_keys/amazon</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">',
\Magento\Store\Model\ScopeInterface::</span></span></font></font></font><font color="#c77dbb"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">SCOPE_DEFAULT</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$apiKey
?? '';</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm">Appelez cette méthode <code class="western">getAmazonApiKey</code>
chaque fois que vous devez utiliser la clé API. 
</p>
<p style="margin-bottom: 0.37cm"><strong>Avantages :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm">Les clés API ne sont pas visibles
	dans l’arborescence publique du projet, réduisant les risques
	d'exposition. 
	</p>
	<li><p>En cas de changement de clé API (rotations), seules les
	modifications dans <strong><code class="western">env.php</code></strong>
	sont nécessaires. 
	</p>
</ul>
<hr/>

<h4 class="western"><strong>B. Validation des données issues de
l’API avant insertion dans Magento</strong></h4>
<p style="margin-bottom: 0.37cm">Lors de l’importation des données
d’une source externe comme l’API Amazon, il est indispensable de
<strong>valider et nettoyer les données</strong> pour empêcher les
attaques comme :</p>
<ul>
	<li><p style="margin-bottom: 0cm">L’injection SQL 
	</p>
	<li><p style="margin-bottom: 0cm">Les scripts malveillants (via
	champs texte) 
	</p>
	<li><p>Les entrées non conformes ou manquantes. 
	</p>
</ul>
<hr/>

<h5 class="western"><strong>1. Utiliser des validateurs pour les
données (sanitize/escape)</strong></h5>
<p>Magento propose des outils natifs pour assurer que les données
insérées soient propres et sécurisées.</p>
<ol>
	<li><p><strong>Exemple : Validation des données produits récupérées
	via l’API</strong> Ajoutez une étape de validation avant de
	sauver les données dans Magento : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;?php</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">namespace
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">MyNamespace\AmazonIntegration\Helper;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Filter\StripTags;</span></span></font></font></font><br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">use
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Magento\Framework\Escaper;</span></span></font></font></font><br/>
<br/>
<font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">class
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">DataValidator</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$stripTagsFilter;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">private
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$escaper;</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">__construct(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       StripTags $stripTagsFilter,</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       Escaper $escaper</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   ) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;stripTagsFilter = $stripTagsFilter;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $this-&gt;escaper = $escaper;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   /**</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    * Valider et nettoyer les données produits</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
    </span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">*/</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">public
function </span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">validateProductData</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">(</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">array
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$productData)</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $validatedData = [];</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $validatedData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= $this-&gt;escaper-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">escapeHtml</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">sku</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?? '');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $validatedData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= $this-&gt;stripTagsFilter-&gt;</span></span></font></font></font><font color="#56a8f5"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">filter</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">name</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?? '</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">Produit
inconnu</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">');</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $validatedData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= (</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">float</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">price</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?? </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">0</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">.</span></i></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">0</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       $validatedData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
= (</span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">int</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">)
($productData['</span></span></font></font></font><font color="#6aab73"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">stock</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">']
?? </span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><i><span style="font-weight: normal">0</span></i></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">);</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       //</span></span></font></font></font><font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
Retour des données validées</span></span></font></font></font><br/>
<font color="#7a7e85"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       </span></span></font></font></font><font color="#cf8e6d"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">return
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$validatedData;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   }</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Explications :</strong></p>
<ul>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">StripTags</code></strong>
	: Supprime toutes les balises HTML ou potentiellement nuisibles. 
	</p>
	<li><p style="margin-bottom: 0cm"><strong><code class="western">Escaper</code></strong>
	: Transforme des caractères spéciaux en entités HTML sûres
	(exemple : <code class="western">&lt;script&gt;</code> →
	<code class="western">&amp;lt;script&amp;gt;</code>). 
	</p>
	<li><p style="margin-bottom: 0cm"><strong>Casting des données</strong>
	: 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm"><code class="western">float</code>
		pour les prix (évite les chaînes ou valeurs inattendues). 
		</p>
		<li><p><code class="western">int</code> pour les données
		numériques comme les stocks. 
		</p>
	</ul>
</ul>
<ol start="2">
	<li><p><strong>Intégration dans le module d’importation</strong>
	(AmazonApi) Mettez en œuvre cette étape avant la sauvegarde des
	produits : 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$validatedProductData
=
$dataValidator-&gt;validateProductData($rawProductData);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;setSku($validatedProductData['sku']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;setName($validatedProductData['name']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;setPrice($validatedProductData['price']);</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$product-&gt;setStockData([</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'qty' =&gt; $validatedProductData['stock'],</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   'is_in_stock' =&gt; $validatedProductData['stock'] &gt; 0</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">]);</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h5 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>2.
Vérification et gestion des exceptions</strong></h5>
<p>Ajoutez des vérifications sur les champs critiques (par ex., SKU,
prix, etc.) et gérez les erreurs :</p>
<ol>
	<li><p><strong>Exemple : Validation stricte</strong> 
	</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
(empty($productData['sku']) || strlen($productData['sku']) &gt; 64)
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   throw new \Magento\Framework\Exception\LocalizedException(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       __('Le SKU est soit vide, soit trop long.')</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font><br/>
<br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
(!is_numeric($productData['price']) || $productData['price'] </span></span></font></font></font><font color="#f75464"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">&lt;</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
0) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   throw new \Magento\Framework\Exception\LocalizedException(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       __('Prix non valide pour le produit avec le SKU &quot;%1&quot;.',
$productData['sku'])</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Journalisation des erreurs :</strong>
Intégrez la journalisation dans les blocs try-catch pour suivre
toutes les données ou erreurs anormales au moment de l’importation.</p>
<ol start="2">
	<p>Exemple :</p>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">try
{</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $importedProducts = $this-&gt;amazonApi-&gt;syncProducts();</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}
catch (\Exception $e) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   $this-&gt;logger-&gt;error(sprintf(&quot;Erreur lors de
l'importation : %s&quot;, $e-&gt;getMessage()));</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   throw $e;</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h4 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>C.
Résolutions de problèmes courants</strong></h4>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Problème avec des données
	non valides ou corrompues</strong> : 
	</p>
	<ul>
		<li><p>Activez les logs pour les erreurs spécifiques à l'import :
				</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$this-&gt;logger-&gt;info('Produit
ignoré en raison de données invalides.', $rawProductData);</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Problème de visibilité des
clés API</strong> : 
</p>
<ol start="2">
	<ul>
		<li><p>Vérifiez les permissions du fichier <code class="western">app/etc/env.php</code>.
		Il doit être accessible uniquement par l'utilisateur serveur
		Magento : 
		</p>
	</ul>
</ol>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#c57633"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">chmod
</span></span></font></font></font><font color="#2aacb8"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">600
</span></span></font></font></font><font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">app/etc/env.php</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><strong>Sécuriser les bases URL</strong>
: Si l’API utilise des URL dynamiques, validez les domaines avant
appel : 
</p>
<p style="line-height: 100%; margin-bottom: 0cm; border: none; padding: 0cm; background: #1e1f22">
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">$allowedDomains
= ['api.amazon.com'];</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">if
(!in_array(parse_url($url, PHP_URL_HOST), $allowedDomains)) {</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   throw new \Magento\Framework\Exception\LocalizedException(</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
       __('Domaine non autorisé détecté.')</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">
   );</span></span></font></font></font><br/>
<font color="#bcbec4"><font face="JetBrains Mono, serif"><font size="2" style="font-size: 10pt"><span style="font-style: normal"><span style="font-weight: normal">}</span></span></font></font></font></p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<h3 class="western" style="margin-top: 0cm; margin-bottom: 0cm"><strong>Validation
et Résultats</strong></h3>
<ol>
	<li><p style="margin-bottom: 0cm"><strong>Validation des clés API</strong>
	: Vérifiez que : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Les clés sont bien accessibles
		depuis le code. 
		</p>
		<li><p style="margin-bottom: 0cm">Elles sont bien protégées dans
		<code class="western">env.php</code> et jamais exposées en front. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Validation des données
	API</strong> : 
	</p>
	<ul>
		<li><p style="margin-bottom: 0cm">Assurez-vous que tous les
		produits importés sont correctement validés. 
		</p>
		<li><p style="margin-bottom: 0cm">Testez différentes entrées/API
		simulées avec des données malveillantes pour vérifier la
		sanitation. 
		</p>
	</ul>
	<li><p style="margin-bottom: 0cm"><strong>Journaux d’erreurs/Logs</strong>
	: 
	</p>
	<ul>
		<li><p>Consultez les logs pour vous assurer que toutes les
		exceptions sont gérées. 
		</p>
	</ul>
</ol>
<hr/>

<h3 class="western"><strong>Résumé</strong></h3>
<p style="margin-bottom: 0.37cm">Dans cette section, nous avons :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Mis en œuvre le <strong>stockage
	des clés API</strong> en toute sécurité dans <code class="western">env.php</code>.
		</p>
	<li><p>Ajouté des mécanismes de <strong>validation et sanitation
	des données</strong> issues de l’API avant leur insertion dans
	Magento. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm">Ces étapes garantissent que votre
projet est sécurisé face aux failles potentielles en matière de
gestion des données sensibles et externes.</p>
<p style="line-height: 100%; margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<p style="margin-bottom: 0cm"><br/>

</p>
<ul>
	<li><p style="margin-bottom: 0.37cm"><strong>Livrables du Jour 5 :</strong></p>
	<ul>
		<li><p style="margin-bottom: 0cm">Site complet fonctionnel avec
		tests réussis. 
		</p>
		<li><p>Optimisations (cache, performance, sécurité) effectuées. 
		</p>
	</ul>
</ul>
<hr/>

<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western" style="page-break-before: always"><strong>Résumé
et Ateliers de fin</strong></h3>
<p style="margin-bottom: 0.37cm">Le dernier jour, vous pouvez :</p>
<ul>
	<li><p style="margin-bottom: 0cm">Réaliser une <strong>démonstration
	complète</strong> du site final avec les participants. 
	</p>
	<li><p>Organiser des ateliers pour améliorer certaines parties (par
	exemple, amélioration du design ou ajout de nouvelles
	fonctionnalités comme des avis clients). 
	</p>
</ul>
<hr/>

<h3 class="western"><br/>
<br/>

</h3>
<h3 class="western" style="page-break-before: always"><strong>Synthèse
des livrables</strong></h3>
<p style="margin-bottom: 0.37cm">À la fin de la formation, les
participants auront :</p>
<ol>
	<li><p style="margin-bottom: 0cm">Un site Magento opérationnel
	intégrant des produits via l’API Amazon. 
	</p>
	<li><p style="margin-bottom: 0cm">Un module personnalisé prêt à
	l’emploi. 
	</p>
	<li><p style="margin-bottom: 0cm">Une documentation technique
	décrivant les étapes de développement. 
	</p>
	<li><p>Une base solide pour travailler sur des projets similaires. 
	</p>
</ol>
<p style="margin-bottom: 0.37cm"><br/>
<br/>

</p>
</body>
</html>